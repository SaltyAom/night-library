(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+DSB":function(t,e,o){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}o.r(e);var i=o("hosL"),r=o("QRet"),a=o("QTFd"),s=o("MRB6"),c=o("mdnY"),l=o("LT/T"),b=o("GNgh");o("tyAA"),e.default=()=>{let{username:t}=Object(s.b)("username"),[e,o]=Object(r.j)([]);if(!t)return Object(i.h)("section",{id:"book-list",class:"-error"},Object(i.h)("h3",{class:"title"},"Night Library"),Object(i.h)("p",{class:"detail"},"Online library management system written in Actix Web."),Object(i.h)(a.a,{href:"/signin"},Object(i.h)("a",{class:"action"},"Signin")));let{data:d,error:h}=Object(c.a)(["listBook","{\n              listBook {\n                data {\n                  id,\n                  title,\n                  author,\n                  price\n                }\n              }\n            }"],l.a),{data:u,error:O}=Object(c.a)(["listBorrowed","{\n              listBorrowed {\n                data {\n                  id\n                }\n              }\n            }"],l.a);if(h||O)return Object(i.h)("section",{id:"book-list",class:"-error"},Object(i.h)("h3",{class:"title"},"Failed to fetch"),Object(i.h)("p",{class:"detail"},"There is a problem requesting an list of books."),Object(i.h)("button",{class:"action",onClick:()=>window.location.reload()},"Retry"));if(!d||!u)return Object(i.h)("section",{id:"book-list"},Object(i.h)("h1",{class:"header"},"Book List"),Array(8).fill(null).map((t,e)=>Object(i.h)(b.a,{key:e,preload:!0})));let j=u.map(({id:t})=>t),k=async t=>{let{data:e,success:n}=await Object(l.b)("borrowBooks",`mutation {\n              borrowBooks(books: ["${t}"]) {\n                data\n                success\n              }\n            }`);if(!n)return console.log("Something went wrong");o(e)};return Object(i.h)("section",{id:"book-list"},Object(i.h)("h1",{class:"header"},"Book List"),d.map(t=>{let o=!(!j.length&&!e.length)&&(j.includes(t.id)||e.includes(t.id));return Object(i.h)(b.a,n({key:t.id},{book:t},{style:o?{opacity:.5}:{},action:o?"Borrowed":"Borrow",onClick:k,disabled:o}))}))}}}]);