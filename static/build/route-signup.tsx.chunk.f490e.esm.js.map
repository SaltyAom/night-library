{"version":3,"sources":["webpack:///./routes/signup.tsx"],"names":["Signin","error","updateError","useState","redirect","allowRedirect","useReducer","_","username","useRef","password","confirmPassword","useEffect","fetch","method","credentials","then","res","text","updateUsername","useCallback","event","current","currentTarget","value","updatePassword","updateConfirmPassword","login","async","preventDefault","response","headers","body","URLSearchParams","data","json","success","info","id","action","onSubmit","class","for","name","type","placeholder","onInput","onChange","href"],"mappings":"6GAAA,yDAqHeA,UA9GA,KACX,IAAKC,EAAOC,GAAeC,YAAS,KAC/BC,EAAUC,GAAiBC,YAAWC,KAAK,GAAM,GAElDC,EAAWC,YAAO,IAClBC,EAAWD,YAAO,IAClBE,EAAkBF,YAAO,IAE7BG,YAAU,KACNC,MAAM,+BAAgC,CAClCC,OAAQ,OACRC,YAAa,YAEhBC,KAAKC,GAAOA,EAAIC,QAChBF,KAAKC,IACCA,GACCZ,EAAc,MAEvB,IAEH,IAAIc,EAAiBC,YAAaC,IAC1Bb,EAASc,QAAUD,EAAME,cAAcC,OACxC,IACHC,EAAiBL,YAAaC,IAC1BX,EAASY,QAAUD,EAAME,cAAcC,OACxC,IACHE,EAAwBN,YAAaC,IACjCV,EAAgBW,QAAUD,EAAME,cAAcC,OAC/C,IAEHG,EAAQP,YAAYQ,UAGpB,GAFAP,EAAMQ,kBAEDrB,EAASc,UAAYZ,EAASY,QAC/B,OAAOpB,EAAY,wCAEvB,GAAIQ,EAASY,UAAYX,EAAgBW,QACrC,OAAOpB,EAAY,0BAEvB,IAAI4B,QAAiBjB,MAAM,4BAA6B,CACpDC,OAAQ,OACRiB,QAAS,CACT,eACI,mDAEJhB,YAAa,UACbiB,KAAM,IAAIC,gBAAgB,CACtBzB,SAAUA,EAASc,QACnBZ,SAAUA,EAASY,YAExBN,KAAKkB,GAAQA,EAAKC,QAElBL,EAASM,SAA6B,sBAAlBN,EAASO,KAC5BhC,EAAc,GAEdH,EAAY4B,EAASO,OAC1B,IAEH,OACI,oBACIC,GAAG,QACHC,OAAO,4BACPzB,OAAO,OACP0B,SAAUb,GAEV,kBAAIc,MAAM,SAAV,UACA,qBAAOA,MAAM,QAAQC,IAAI,YAAzB,YAGA,qBACID,MAAM,iBACNE,KAAK,WACLC,KAAK,OACLC,YAAY,WACZC,QAAS3B,IAEb,qBAAOsB,MAAM,QAAQC,IAAI,YAAzB,YAGA,qBACID,MAAM,iBACNE,KAAK,WACLC,KAAK,WACLC,YAAY,WACZE,SAAUtB,IAEd,qBAAOgB,MAAM,QAAQC,IAAI,oBAAzB,oBAGA,qBACID,MAAM,yBACNE,KAAK,mBACLC,KAAK,WACLC,YAAY,mBACZE,SAAUrB,IAEbzB,GAAS,iBAAGwC,MAAM,mBAAmBxC,GACtC,uBAASwC,MAAM,UACX,sBAAQA,MAAM,SAAd,UACA,YAAC,IAAD,CAAMO,KAAK,WACP,iBAAGP,MAAM,QAAT,YAGNrC,GACE,YAAC,IAAD,CAAU4C,KAAK","file":"route-signup.tsx.chunk.f490e.esm.js","sourcesContent":["import { h } from 'preact'\nimport { useState, useRef, useReducer, useCallback, useEffect } from 'preact/hooks'\n\nimport { Link, Redirect } from 'wouter/preact'\n\nimport '../styles/sign.styl'\n\nconst Signin = () => {\n    let [error, updateError] = useState(''),\n        [redirect, allowRedirect] = useReducer(_ => true, false)\n\n    let username = useRef(''),\n        password = useRef(''),\n        confirmPassword = useRef('')\n\n    useEffect(() => {\n        fetch('http://localhost/api/refresh', {\n            method: 'POST',\n            credentials: 'include'\n        })\n        .then(res => res.text())\n        .then(res => {\n            if(res)\n                allowRedirect(1)\n        })\n    }, [])\n\n    let updateUsername = useCallback((event: any) => {\n            username.current = event.currentTarget.value\n        }, []),\n        updatePassword = useCallback((event: any) => {\n            password.current = event.currentTarget.value\n        }, []),\n        updateConfirmPassword = useCallback((event: any) => {\n            confirmPassword.current = event.currentTarget.value\n        }, [])\n\n    let login = useCallback(async (event: Event) => {\n        event.preventDefault()\n\n        if (!username.current || !password.current)\n            return updateError(\"Username and Password can't be blank\")\n\n        if (password.current !== confirmPassword.current)\n            return updateError(\"Password doesn't match\")\n\n        let response = await fetch('http://localhost/register', {\n            method: 'POST',\n            headers: {\n            'Content-Type':\n                'application/x-www-form-urlencoded;charset=UTF-8'\n            },\n            credentials: 'include',\n            body: new URLSearchParams({\n                username: username.current,\n                password: password.current\n            })\n        }).then(data => data.json())\n\n        if(response.success || response.info === \"Already signin in\")\n            allowRedirect(1)\n        else\n            updateError(response.info)\n    }, [])\n    \n    return (\n        <form\n            id=\"login\"\n            action=\"http://localhost/register\"\n            method=\"POST\"\n            onSubmit={login}\n        >\n            <h1 class=\"title\">Signin</h1>\n            <label class=\"label\" for=\"username\">\n                Username\n            </label>\n            <input\n                class=\"input username\"\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Username\"\n                onInput={updateUsername}\n            />\n            <label class=\"label\" for=\"password\">\n                Password\n            </label>\n            <input\n                class=\"input password\"\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Password\"\n                onChange={updatePassword}\n            />\n            <label class=\"label\" for=\"confirm-password\">\n                Confirm Password\n            </label>\n            <input\n                class=\"input confirm-password\"\n                name=\"confirm-password\"\n                type=\"password\"\n                placeholder=\"Confirm Password\"\n                onChange={updateConfirmPassword}\n            />\n            {error && <p class=\"warning -hidden\">{error}</p>}\n            <section class=\"action\">\n                <button class=\"login\">Signup</button>\n                <Link href=\"/signin\">\n                    <a class=\"link\">Signin</a>\n                </Link>\n            </section>\n            { redirect &&\n                <Redirect href=\"/\" />\n            }\n        </form>\n    )\n}\n\nexport default Signin\n"],"sourceRoot":""}