{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/index.js","webpack:///../node_modules/storeon/index.js","webpack:///./stores/user.ts","webpack:///./stores/index.ts","webpack:///../src/util.js","webpack:///../src/PureComponent.js","webpack:///../src/forwardRef.js","webpack:///../src/Children.js","webpack:///../src/suspense.js","webpack:///../src/suspense-list.js","webpack:///../src/portals.js","webpack:///../src/render.js","webpack:///../src/events.js","webpack:///../node_modules/storeon/preact/index.js","webpack:///../node_modules/wouter/preact/use-location.js","webpack:///../node_modules/wouter/preact/matcher.js","webpack:///../node_modules/wouter/preact/index.js","webpack:///./layouts/app/navigator/action/index.tsx","webpack:///./layouts/app/navigator/index.tsx","webpack:///./layouts/app/index.tsx","webpack:///./layouts/refresh-provider/index.tsx","webpack:///../node_modules/wouter/use-location.js","webpack:///../node_modules/swr/esm/libs/is-document-visible.js","webpack:///../node_modules/swr/esm/libs/is-online.js","webpack:///../node_modules/swr/esm/libs/hash.js","webpack:///../node_modules/swr/esm/cache.js","webpack:///../node_modules/swr/esm/config.js","webpack:///../node_modules/swr/esm/libs/throttle.js","webpack:///../node_modules/swr/esm/swr-config-context.js","webpack:///../node_modules/swr/esm/use-swr.js","webpack:///../node_modules/swr/esm/use-swr-pages.js","webpack:///../node_modules/swr/esm/index.js","webpack:///./libs/graphql.ts","webpack:///./component/book/index.tsx","webpack:///./routes/landing.tsx","webpack:///./routes/signin.tsx","webpack:///./routes/signup.tsx","webpack:///./routes/not-found.tsx","webpack:///./routes/user.tsx","webpack:///./routes/my-book.tsx","webpack:///./router.tsx","webpack:///./index.tsx","webpack:///external \"preact\"","webpack:///../node_modules/fast-deep-equal/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","currentIndex","currentComponent","prevRaf","currentHook","afterPaintEffects","oldBeforeRender","options","oldAfterDiff","diffed","oldCommit","oldBeforeUnmount","unmount","getHookState","index","type","hooks","length","push","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_reducer","nextValue","action","setState","useEffect","callback","args","state","argsChanged","useLayoutEffect","useRef","initialValue","useMemo","current","factory","useCallback","useContext","context","provider","sub","props","flushAfterPaintEffects","some","component","forEach","invokeCleanup","invokeEffect","e","vnode","requestAnimationFrame","raf","done","clearTimeout","timeout","HAS_RAF","cancelAnimationFrame","setTimeout","commitQueue","filter","cb","hook","_cleanup","oldArgs","newArgs","arg","f","events","store","user","on","username","initial","dispatch","event","data","changed","changes","diff","then","assign","obj","shallowDiffers","a","b","PureComponent","isPureReactComponent","shouldComponentUpdate","this","Component","oldDiffHook","_forwarded","ref","REACT_FORWARD_SYMBOL","for","forwardRef","fn","Forwarded","clone","$$typeof","render","isReactComponent","displayName","mapFn","children","toChildArray","reduce","acc","concat","Children","map","count","only","Error","toArray","oldCatchError","detachedClone","Suspense","_suspenders","suspended","_suspended","SuspenseList","_next","_map","error","newVNode","oldVNode","promise","suspendingComponent","resolve","resolved","onResolved","onSuspensionComplete","componentWillUnmount","pop","forceUpdate","createElement","Fragment","fallback","list","child","node","delete","revealOrder","size","delegated","wrappedUnsuspend","unsuspend","Map","reverse","set","componentDidUpdate","componentDidMount","ContextProvider","getChildContext","Portal","_this","container","wrap","_container","_temp","parentNode","removeChild","_unmount","_wrap","_hasMounted","document","createTextNode","hydrate","appendChild","CAMEL_PROPS","REACT_ELEMENT_TYPE","oldEventHook","setSafeDescriptor","proto","configurable","v","persist","stoppedPropagating","defaultPrevented","origStopPropagation","stopPropagation","origPreventDefault","preventDefault","isPropagationStopped","isDefaultPrevented","nativeEvent","classNameDescriptor","class","oldVNodeHook","className","shouldSanitize","attrs","defaultValue","Array","isArray","multiple","indexOf","selected","test","replace","toLowerCase","newProps","ondoubleclick","ondblclick","onbeforeinput","onchange","normalized","oninput","_patchedLifecycles","isValidElement","element","createContext","createRef","StoreContext","useIsomorphicLayoutEffect","window","useStoreon","keys","rerender","_","base","currentPathname","path","update","prevPath","patchHistoryEvents","checkForUpdates","pathname","addEventListener","removeEventListener","to","history","patched","original","result","apply","arguments","Event","dispatchEvent","location","slice","makeMatcher","makeRegexpFn","pathToRegexp","cache","pattern","getRegexp","regexp","out","exec","params","escapeRx","str","rxForSegment","repeat","optional","prefix","capture","groupRx","match","lastIndex","segment","mod","prev","substring","RegExp","RouterCtx","buildRouter","locationHook","matcher","useRouter","globalRef","useLocation","router","useNavigate","navRef","navigate","href","Link","onClick","extraProps","ctrlKey","metaKey","altKey","shiftKey","button","jsx","h","cloneElement","Redirect","Action","Navigator","id","AppLayout","RefreshProvider","fetch","method","credentials","res","text","isDocumentVisible","visibilityState","isOnline","navigator","onLine","table","WeakMap","counter","Cache","initialData","__cache","entries","__listeners","_key","serializeKey","shouldNotify","mutate","notify","from","has","clear","err","_hash","String","hash","subscribe","listener","isSubscribed","_i","_a","CONCURRENT_PROMISES","CONCURRENT_PROMISES_TS","FOCUS_REVALIDATORS","CACHE_REVALIDATORS","MUTATION_TS","slowConnection","effectiveType","defaultConfig","onLoadingSlow","onSuccess","onError","onErrorRetry","__","config","revalidate","opts","errorRetryCount","retryCount","Math","min","random","errorRetryInterval","focusThrottleInterval","dedupingInterval","loadingTimeout","refreshInterval","revalidateOnFocus","revalidateOnReconnect","refreshWhenHidden","refreshWhenOffline","shouldRetryOnError","suspense","compare","deepEqual","eventsBinded","throttle","interval","pending","SWRConfigContext","__awaiter","thisArg","_arguments","P","generator","Promise","reject","fulfilled","step","next","rejected","__generator","body","y","g","label","sent","trys","ops","verb","iterator","op","TypeError","IS_SERVER","trigger","shouldRevalidate","keyErr","updaters","currentData","currentError","promises","all","broadcastState","_data","beforeMutationTs","beforeConcurrentPromisesTs","err_1","err_2","Date","now","Provider","useSWR","fnArgs","fetcher","initialError","stateDependencies","isValidating","stateRef","payload","shouldUpdateState","k","unmountedRef","keyRef","eventsRef","emit","boundMutate","revalidateOpts","loading","shouldDeduping","newData","startAt","newState","err_3","dedupe","undefined","currentHookData","latestKeyedData","onFocus","softRevalidate","revalidateOnMount","onUpdate","updatedData","updatedError","needUpdate","reconnect","revalidators","timer","tick","latestData","latestError","defineProperties","graphqlBase","operationName","query","response","headers","JSON","stringify","json","graphqlRequest","Book","book","preload","hiddenPrice","style","disabled","title","author","price","Landing","localBorrowed","updateBorrow","books","borrowed","borrowedError","reload","fill","borrowedIdList","returnBook","borrowedList","success","console","log","isBorrowed","includes","opacity","Signin","updateError","redirect","allowRedirect","password","updateUsername","currentTarget","updatePassword","login","URLSearchParams","info","onSubmit","placeholder","onInput","onChange","confirmPassword","updateConfirmPassword","NotFound","User","signout","requestSignout","MyBook","returned","updateReturned","Pages","App","passive","require","keyList","hasProp","equal","arrA","arrB","dateA","dateB","getTime","regexpA","regexpB","toString"],"mappings":"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","file":"ssr-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"/hs+\");\n","import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport { hydrate, render, REACT_ELEMENT_TYPE } from './render';\n\nconst version = '16.8.0'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy\n};\n","let createStoreon = modules => {\n  let events = {}\n  let state = {}\n\n  let store = {\n    dispatch (event, data) {\n      if (event !== '@dispatch') {\n        store.dispatch('@dispatch', [event, data, events[event]])\n      }\n\n      if (events[event]) {\n        let changes = {}\n        let changed\n        events[event].forEach(i => {\n          let diff = i(state, data)\n          if (diff && typeof diff.then !== 'function') {\n            changed = state = { ...state, ...diff }\n            changes = { ...changes, ...diff }\n          }\n        })\n        if (changed) store.dispatch('@changed', changes)\n      }\n    },\n\n    get: () => state,\n\n    on (event, cb) {\n      ;(events[event] || (events[event] = [])).push(cb)\n\n      return () => {\n        events[event] = events[event].filter(i => i !== cb)\n      }\n    }\n  }\n\n  modules.forEach(i => {\n    if (i) i(store)\n  })\n  store.dispatch('@init')\n\n  return store\n}\n\nexport { createStoreon }\n","import { StoreonModule } from 'storeon'\n\nimport { UserStore, UserEvent } from './types'\n\nconst user: StoreonModule<UserStore, UserEvent> = store => {\n    store.on('@init', () => ({ username: null, initial: true }))\n\n    store.on('UPDATE_USERNAME', (store, username) => ({\n        username,\n        initial: false\n    }))\n\n    store.on('LOGOUT', store => ({\n        username: null,\n        initial: false\n    }))\n}\n\nexport default user\n","import { createStoreon } from 'storeon'\n\nimport user from './user'\n\nconst store = createStoreon<any>([user])\nexport default store\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport class PureComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Some third-party libraries check if this property is present\n\t\tthis.isPureReactComponent = true;\n\t}\n\n\tshouldComponentUpdate(props, state) {\n\t\treturn (\n\t\t\tshallowDiffers(this.props, props) || shallowDiffers(this.state, state)\n\t\t);\n\t}\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function forwardRef(fn) {\n\t// We always have ref in props.ref, except for\n\t// mobx-react. It will call this function directly\n\t// and always pass ref as the second argument.\n\tfunction Forwarded(props, ref) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\tref = props.ref || ref;\n\t\treturn fn(\n\t\t\tclone,\n\t\t\t!ref || (typeof ref === 'object' && !('current' in ref)) ? null : ref\n\t\t);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = Forwarded;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (!children) return null;\n\treturn toChildArray(children).reduce(\n\t\t(acc, value, index) => acc.concat(fn(value, index)),\n\t\t[]\n\t);\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tchildren = toChildArray(children);\n\t\tif (children.length !== 1) {\n\t\t\tthrow new Error('Children.only() expects only one child.');\n\t\t}\n\t\treturn children[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options, Fragment } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode._component);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nfunction detachedClone(vnode) {\n\tif (vnode) {\n\t\tvnode = assign({}, vnode);\n\t\tvnode._component = null;\n\t\tvnode._children = vnode._children && vnode._children.map(detachedClone);\n\t}\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @param {Promise} promise The thrown promise\n * @param {Component<any, any>} suspendingComponent The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingComponent) {\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._suspendedComponentWillUnmount =\n\t\tsuspendingComponent.componentWillUnmount;\n\tsuspendingComponent.componentWillUnmount = () => {\n\t\tonResolved();\n\n\t\tif (suspendingComponent._suspendedComponentWillUnmount) {\n\t\t\tsuspendingComponent._suspendedComponentWillUnmount();\n\t\t}\n\t};\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\tc._vnode._children[0] = c.state._suspended;\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\tif (!c._pendingSuspensionCount++) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children)\n\t\t\tthis._vnode._children[0] = detachedClone(this._detachOnNextRender);\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tstate._suspended && props.fallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('../src/internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tconst list = this;\n\tlist._map.forEach((node, child) => {\n\t\tresolve(list, child, node);\n\t});\n};\n","import { createElement, hydrate, render, __u as _unmount } from 'preact';\n\nclass ContextProvider {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender(props) {\n\t\treturn props.children;\n\t}\n}\n\n/**\n * Portal component\n * @param {object | null | undefined} props\n */\nfunction Portal(props) {\n\tlet _this = this;\n\tlet container = props.container;\n\tlet wrap = createElement(\n\t\tContextProvider,\n\t\t{ context: _this.context },\n\t\tprops.vnode\n\t);\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t\t_this._hasMounted = false;\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props.vnode) {\n\t\tif (!_this._hasMounted) {\n\t\t\t// Create a placeholder that we can use to insert into.\n\t\t\t_this._temp = document.createTextNode('');\n\t\t\t// Hydrate existing nodes to keep the dom intact, when rendering\n\t\t\t// wrap into the container.\n\t\t\thydrate('', container);\n\t\t\t// Append to the container (this matches React's behavior)\n\t\t\tcontainer.appendChild(_this._temp);\n\t\t\t// At this point we have mounted and should set our container.\n\t\t\t_this._hasMounted = true;\n\t\t\t_this._container = container;\n\t\t\t// Render our wrapping element into temp.\n\t\t\trender(wrap, container, _this._temp);\n\t\t\t_this._children = _this._temp._children;\n\t\t} else {\n\t\t\t// When we have mounted and the vnode is present it means the\n\t\t\t// props have changed or a parent is triggering a rerender.\n\t\t\t// This implies we only need to call render. But we need to keep\n\t\t\t// the old tree around, otherwise will treat the vnodes as new and\n\t\t\t// will wrongly call `componentDidMount` on them\n\t\t\tcontainer._children = _this._children;\n\t\t\trender(wrap, container);\n\t\t\t_this._children = container._children;\n\t\t}\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._hasMounted) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t}\n\t// Set the wrapping element for future unmounting.\n\t_this._wrap = wrap;\n\n\t_this.componentWillUnmount = () => {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t};\n\n\treturn null;\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { vnode, container });\n}\n","import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\nimport { applyEventNormalization } from './events';\n\nconst CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\twhile (parent.firstChild) {\n\t\t\tparent.removeChild(parent.firstChild);\n\t\t}\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\te.persist = () => {};\n\tlet stoppedPropagating = false,\n\t\tdefaultPrevented = false;\n\n\tconst origStopPropagation = e.stopPropagation;\n\te.stopPropagation = () => {\n\t\torigStopPropagation.call(e);\n\t\tstoppedPropagating = true;\n\t};\n\n\tconst origPreventDefault = e.preventDefault;\n\te.preventDefault = () => {\n\t\torigPreventDefault.call(e);\n\t\tdefaultPrevented = true;\n\t};\n\n\te.isPropagationStopped = () => stoppedPropagating;\n\te.isDefaultPrevented = () => defaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\n// Patch in `UNSAFE_*` lifecycle hooks\nfunction setSafeDescriptor(proto, key) {\n\tif (proto['UNSAFE_' + key] && !proto[key]) {\n\t\tObject.defineProperty(proto, key, {\n\t\t\tconfigurable: false,\n\t\t\tget() {\n\t\t\t\treturn this['UNSAFE_' + key];\n\t\t\t},\n\t\t\t// This `set` is only used if a user sets a lifecycle like cWU\n\t\t\t// after setting a lifecycle like UNSAFE_cWU. I doubt anyone\n\t\t\t// actually does this in practice so not testing it\n\t\t\t/* istanbul ignore next */\n\t\t\tset(v) {\n\t\t\t\tthis['UNSAFE_' + key] = v;\n\t\t\t}\n\t\t});\n\t}\n}\n\nlet classNameDescriptor = {\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tlet type = vnode.type;\n\tlet props = vnode.props;\n\n\tif (type) {\n\t\t// Alias `class` prop to `className` if available\n\t\tif (props.class != props.className) {\n\t\t\tclassNameDescriptor.enumerable = 'className' in props;\n\t\t\tif (props.className != null) props.class = props.className;\n\t\t\tObject.defineProperty(props, 'className', classNameDescriptor);\n\t\t}\n\n\t\t// Apply DOM VNode compat\n\t\tif (typeof type != 'function') {\n\t\t\t// Apply defaultValue to value\n\t\t\tif (props.defaultValue && props.value !== undefined) {\n\t\t\t\tif (!props.value && props.value !== 0) {\n\t\t\t\t\tprops.value = props.defaultValue;\n\t\t\t\t}\n\t\t\t\tdelete props.defaultValue;\n\t\t\t}\n\n\t\t\t// Add support for array select values: <select value={[]} />\n\t\t\tif (Array.isArray(props.value) && props.multiple && type === 'select') {\n\t\t\t\ttoChildArray(props.children).forEach(child => {\n\t\t\t\t\tif (props.value.indexOf(child.props.value) != -1) {\n\t\t\t\t\t\tchild.props.selected = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdelete props.value;\n\t\t\t}\n\n\t\t\t// Normalize DOM vnode properties.\n\t\t\tlet shouldSanitize, attrs, i;\n\t\t\tfor (i in props) if ((shouldSanitize = CAMEL_PROPS.test(i))) break;\n\t\t\tif (shouldSanitize) {\n\t\t\t\tattrs = vnode.props = {};\n\t\t\t\tfor (i in props) {\n\t\t\t\t\tattrs[\n\t\t\t\t\t\tCAMEL_PROPS.test(i) ? i.replace(/[A-Z0-9]/, '-$&').toLowerCase() : i\n\t\t\t\t\t] = props[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Events\n\t\tapplyEventNormalization(vnode);\n\n\t\t// Component base class compat\n\t\t// We can't just patch the base component class, because components that use\n\t\t// inheritance and are transpiled down to ES5 will overwrite our patched\n\t\t// getters and setters. See #1941\n\t\tif (\n\t\t\ttypeof type == 'function' &&\n\t\t\t!type._patchedLifecycles &&\n\t\t\ttype.prototype\n\t\t) {\n\t\t\tsetSafeDescriptor(type.prototype, 'componentWillMount');\n\t\t\tsetSafeDescriptor(type.prototype, 'componentWillReceiveProps');\n\t\t\tsetSafeDescriptor(type.prototype, 'componentWillUpdate');\n\t\t\ttype._patchedLifecycles = true;\n\t\t}\n\t}\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n","/**\n * Normalize event handlers like react does. Most famously it uses `onChange` for any input element.\n * @param {import('./internal').VNode} vnode The vnode to normalize events on\n */\nexport function applyEventNormalization({ type, props }) {\n\tif (!props || typeof type != 'string') return;\n\tlet newProps = {};\n\n\tfor (let i in props) {\n\t\tif (/^on(Ani|Tra|Tou)/.test(i)) {\n\t\t\tprops[i.toLowerCase()] = props[i];\n\t\t\tdelete props[i];\n\t\t}\n\t\tnewProps[i.toLowerCase()] = i;\n\t}\n\tif (newProps.ondoubleclick) {\n\t\tprops.ondblclick = props[newProps.ondoubleclick];\n\t\tdelete props[newProps.ondoubleclick];\n\t}\n\tif (newProps.onbeforeinput) {\n\t\tprops.onbeforeinput = props[newProps.onbeforeinput];\n\t\tdelete props[newProps.onbeforeinput];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (\n\t\tnewProps.onchange &&\n\t\t(type === 'textarea' ||\n\t\t\t(type.toLowerCase() === 'input' && !/^fil|che|ra/i.test(props.type)))\n\t) {\n\t\tlet normalized = newProps.oninput || 'oninput';\n\t\tif (!props[normalized]) {\n\t\t\tprops[normalized] = props[newProps.onchange];\n\t\t\tdelete props[newProps.onchange];\n\t\t}\n\t}\n}\n","import {\n  useMemo,\n  useContext,\n  useState,\n  useLayoutEffect,\n  useEffect\n} from 'preact/hooks'\nimport { createContext, h } from 'preact'\nimport { forwardRef } from 'preact/compat'\n\nlet StoreContext = createContext()\n\nlet useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffect : useEffect\n\nlet customContext = context => (...keys) => {\n  let store = useContext(context)\n  if (process.env.NODE_ENV !== 'production' && !store) {\n    throw new Error(\n      'Could not find storeon context value.' +\n        'Please ensure the component is wrapped in a <StoreContext.Provider>'\n    )\n  }\n\n  let rerender = useState({})\n\n  useIsomorphicLayoutEffect(() => {\n    return store.on('@changed', (_, changed) => {\n      let changesInKeys = keys.some(key => key in changed)\n      if (changesInKeys) rerender[1]({})\n    })\n  }, [])\n\n  return useMemo(() => {\n    let state = store.get()\n    let data = {}\n    keys.forEach(key => {\n      data[key] = state[key]\n    })\n    data.dispatch = store.dispatch\n    return data\n  }, [rerender[0]])\n}\n\nlet useStoreon = customContext(StoreContext)\n\nlet connectStoreon = (...keys) => {\n  let Component = keys.pop()\n  return forwardRef((originProps, ref) => {\n    let props = { ...originProps, ...useStoreon(...keys), ref }\n    return h(Component, props)\n  })\n}\n\nexport { useStoreon, StoreContext, connectStoreon, customContext }\n","import { useEffect, useRef, useState, useCallback } from \"./react-deps.js\";\n\nexport default ({ base = \"\" } = {}) => {\n  const [path, update] = useState(currentPathname(base));\n  const prevPath = useRef(path);\n\n  useEffect(() => {\n    patchHistoryEvents();\n\n    // this function checks if the location has been changed since the\n    // last render and updates the state only when needed.\n    // unfortunately, we can't rely on `path` value here, since it can be stale,\n    // that's why we store the last pathname in a ref.\n    const checkForUpdates = () => {\n      const pathname = currentPathname(base);\n      prevPath.current !== pathname && update((prevPath.current = pathname));\n    };\n\n    const events = [\"popstate\", \"pushState\", \"replaceState\"];\n    events.map((e) => addEventListener(e, checkForUpdates));\n\n    // it's possible that an update has occurred between render and the effect handler,\n    // so we run additional check on mount to catch these updates. Based on:\n    // https://gist.github.com/bvaughn/e25397f70e8c65b0ae0d7c90b731b189\n    checkForUpdates();\n\n    return () => events.map((e) => removeEventListener(e, checkForUpdates));\n  }, [base]);\n\n  // the 2nd argument of the `useLocation` return value is a function\n  // that allows to perform a navigation.\n  //\n  // the function reference should stay the same between re-renders, so that\n  // it can be passed down as an element prop without any performance concerns.\n  const navigate = useCallback(\n    (to, { replace = false } = {}) =>\n      history[replace ? \"replaceState\" : \"pushState\"](0, 0, base + to),\n    [base]\n  );\n\n  return [path, navigate];\n};\n\n// While History API does have `popstate` event, the only\n// proper way to listen to changes via `push/replaceState`\n// is to monkey-patch these methods.\n//\n// See https://stackoverflow.com/a/4585031\n\nlet patched = 0;\n\nconst patchHistoryEvents = () => {\n  if (patched) return;\n\n  [\"pushState\", \"replaceState\"].map((type) => {\n    const original = history[type];\n\n    history[type] = function() {\n      const result = original.apply(this, arguments);\n      const event = new Event(type);\n      event.arguments = arguments;\n\n      dispatchEvent(event);\n      return result;\n    };\n  });\n\n  return (patched = 1);\n};\n\nconst currentPathname = (base, path = location.pathname) =>\n  !path.indexOf(base) ? path.slice(base.length) || \"/\" : path;\n","// creates a matcher function\nexport default function makeMatcher(makeRegexpFn = pathToRegexp) {\n  let cache = {};\n\n  // obtains a cached regexp version of the pattern\n  const getRegexp = pattern =>\n    (cache[pattern]) || (cache[pattern] = makeRegexpFn(pattern));\n\n  return (pattern, path) => {\n    const { regexp, keys } = getRegexp(pattern || \"\");\n    const out = regexp.exec(path);\n\n    if (!out) return [false, null];\n\n    // formats an object with matched params\n    const params = keys.reduce((params, key, i) => {\n      params[key.name] = out[i + 1];\n      return params;\n    }, {});\n\n    return [true, params];\n  };\n}\n\n// escapes a regexp string (borrowed from path-to-regexp sources)\n// https://github.com/pillarjs/path-to-regexp/blob/v3.0.0/index.js#L202\nconst escapeRx = str => str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n\n// returns a segment representation in RegExp based on flags\n// adapted and simplified version from path-to-regexp sources\nconst rxForSegment = (repeat, optional, prefix) => {\n  let capture = repeat ? \"((?:[^\\\\/]+?)(?:\\\\/(?:[^\\\\/]+?))*)\" : \"([^\\\\/]+?)\";\n  if (optional && prefix) capture = \"(?:\\\\/\" + capture + \")\";\n  return capture + (optional ? \"?\" : \"\");\n};\n\nconst pathToRegexp = pattern => {\n  const groupRx = /:([A-Za-z0-9_]+)([?+*]?)/g;\n\n  let match = null,\n    lastIndex = 0,\n    keys = [],\n    result = \"\";\n\n  while ((match = groupRx.exec(pattern)) !== null) {\n    const [_, segment, mod] = match;\n\n    // :foo  [1]      (  )\n    // :foo? [0 - 1]  ( o)\n    // :foo+ [1 - ∞]  (r )\n    // :foo* [0 - ∞]  (ro)\n    const repeat = mod === \"+\" || mod === \"*\";\n    const optional = mod === \"?\" || mod === \"*\";\n    const prefix = optional && pattern[match.index - 1] === \"/\" ? 1 : 0;\n\n    const prev = pattern.substring(lastIndex, match.index - prefix);\n\n    keys.push({ name: segment });\n    lastIndex = groupRx.lastIndex;\n\n    result += escapeRx(prev) + rxForSegment(repeat, optional, prefix);\n  }\n\n  result += escapeRx(pattern.substring(lastIndex));\n  return { keys, regexp: new RegExp(\"^\" + result + \"(?:\\\\/)?$\", \"i\") };\n};\n","import locationHook from \"./use-location.js\";\nimport makeMatcher from \"./matcher.js\";\n\nimport {\n  useRef,\n  useLayoutEffect,\n  useContext,\n  useCallback,\n  createContext,\n  isValidElement,\n  cloneElement,\n  createElement as h,\n} from \"./react-deps.js\";\n\n/*\n * Part 1, Hooks API: useRouter, useRoute and useLocation\n */\n\n// one of the coolest features of `createContext`:\n// when no value is provided — default object is used.\n// allows us to use the router context as a global ref to store\n// the implicitly created router (see `useRouter` below)\nconst RouterCtx = createContext({});\n\nconst buildRouter = ({\n  hook = locationHook,\n  base = \"\",\n  matcher = makeMatcher(),\n} = {}) => ({ hook, base, matcher });\n\nexport const useRouter = () => {\n  const globalRef = useContext(RouterCtx);\n\n  // either obtain the router from the outer context (provided by the\n  // `<Router /> component) or create an implicit one on demand.\n  return globalRef.v || (globalRef.v = buildRouter());\n};\n\nexport const useLocation = () => {\n  const router = useRouter();\n  return router.hook(router);\n};\n\nexport const useRoute = (pattern) => {\n  const [path] = useLocation();\n  return useRouter().matcher(pattern, path);\n};\n\n// internal hook used by Link and Redirect in order to perform navigation\nconst useNavigate = (options) => {\n  const navRef = useRef();\n  const [, navigate] = useLocation();\n\n  navRef.current = () => navigate(options.to || options.href, options);\n  return navRef;\n};\n\n/*\n * Part 2, Low Carb Router API: Router, Route, Link, Switch\n */\n\nexport const Router = (props) => {\n  const ref = useRef();\n\n  // this little trick allows to avoid having unnecessary\n  // calls to potentially expensive `buildRouter` method.\n  // https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n  const value = ref.current || (ref.current = { v: buildRouter(props) });\n\n  return h(RouterCtx.Provider, {\n    value,\n    children: props.children,\n  });\n};\n\nexport const Route = ({ path, match, component, children }) => {\n  const useRouteMatch = useRoute(path);\n\n  // `props.match` is present - Route is controlled by the Switch\n  const [matches, params] = match || useRouteMatch;\n\n  if (!matches) return null;\n\n  // React-Router style `component` prop\n  if (component) return h(component, { params });\n\n  // support render prop or plain children\n  return typeof children === \"function\" ? children(params) : children;\n};\n\nexport const Link = (props) => {\n  const navRef = useNavigate(props);\n  const { base } = useRouter();\n\n  let { to, href = to, children, onClick } = props;\n\n  const handleClick = useCallback(\n    (event) => {\n      // ignores the navigation when clicked using right mouse button or\n      // by holding a special modifier key: ctrl, command, win, alt, shift\n      if (\n        event.ctrlKey ||\n        event.metaKey ||\n        event.altKey ||\n        event.shiftKey ||\n        event.button !== 0\n      )\n        return;\n\n      event.preventDefault();\n      navRef.current();\n      onClick && onClick(event);\n    },\n    // navRef is a ref so it never changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [onClick]\n  );\n\n  // wraps children in `a` if needed\n  const extraProps = { href: base + href, onClick: handleClick, to: null };\n  const jsx = isValidElement(children) ? children : h(\"a\", props);\n\n  return cloneElement(jsx, extraProps);\n};\n\nexport const Switch = ({ children, location }) => {\n  const { matcher } = useRouter();\n  const [originalLocation] = useLocation();\n\n  children = Array.isArray(children) ? children : [children];\n\n  for (const element of children) {\n    let match = 0;\n\n    if (\n      isValidElement(element) &&\n      // we don't require an element to be of type Route,\n      // but we do require it to contain a truthy `path` prop.\n      // this allows to use different components that wrap Route\n      // inside of a switch, for example <AnimatedRoute />.\n      (match = element.props.path\n        ? matcher(element.props.path, location || originalLocation)\n        : [true, {}])[0]\n    )\n      return cloneElement(element, { match });\n  }\n\n  return null;\n};\n\nexport const Redirect = (props) => {\n  const navRef = useNavigate(props);\n\n  // empty array means running the effect once, navRef is a ref so it never changes\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(() => navRef.current(), []);\n\n  return null;\n};\n\nexport default useRoute;\n","import { h } from 'preact'\n\nimport { Link } from 'wouter/preact'\n\nimport ActionComponent from './types'\n\nimport './action.styl'\n\nconst Action: ActionComponent = ({ children, href }) => (\n    <Link href={href}>\n        <a class=\"action\">\n            <p class=\"name\">\n                {children}\n            </p>\n            <div class=\"line\" />\n        </a>\n    </Link>\n)\n\nexport default Action","import { h, Fragment } from 'preact'\n\nimport { Link } from 'wouter/preact'\n\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../../../stores/types'\n\nimport Action from './action'\n\nimport './navigator.styl'\n\nconst Navigator = () => {\n    let { username } = useStoreon<UserStore, UserEvent>('username')\n\n    return (\n        <nav id=\"navigator\">\n            <section class=\"header\">\n                <Link href=\"/\">\n                    <a class=\"title\">\n                        <h1 class=\"value\">Night Library</h1>\n                    </a>\n                </Link>\n            </section>\n            <section id=\"action-list\">\n                {username ? (\n                    <Fragment>\n                        <Action href=\"/my-book\">My Book</Action>\n                        <Action href=\"/me\">{username}</Action>\n                    </Fragment>\n                ) : (\n                    <Fragment>\n                        <Action href=\"/signin\">Signin</Action>\n                        <Action href=\"/signup\">Signup</Action>\n                    </Fragment>\n                )}\n            </section>\n        </nav>\n    )\n}\n\nexport default Navigator\n","import { h, Fragment } from \"preact\";\n\nimport Navigator from './navigator'\n\nimport AppLayoutComponent from './types'\n\nimport './app-layout.styl'\n\nconst AppLayout: AppLayoutComponent = ({ children }) => (\n    <Fragment>\n        <Navigator />\n        <main id=\"main\">\n            {children}\n        </main>\n    </Fragment>\n)\n\nexport default AppLayout","import { useEffect } from 'preact/hooks'\n\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../../stores/types'\n\nimport RefreshProviderComponent from './types'\n\nconst RefreshProvider: RefreshProviderComponent = ({ children }) => {\n    let { dispatch } = useStoreon<UserStore, UserEvent>()\n\n    useEffect(() => {\n        fetch(`http://localhost/api/refresh`, {\n            method: 'POST',\n            credentials: 'include'\n        })\n        .then(res => res.text())\n        .then(res => {\n            if(res)\n                dispatch(\"UPDATE_USERNAME\", res)\n            else\n                dispatch(\"LOGOUT\", '')\n        })\n    }, [])    \n    \n    return children\n}\n\nexport default RefreshProvider","import { useEffect, useRef, useState, useCallback } from \"./react-deps.js\";\n\nexport default ({ base = \"\" } = {}) => {\n  const [path, update] = useState(currentPathname(base));\n  const prevPath = useRef(path);\n\n  useEffect(() => {\n    patchHistoryEvents();\n\n    // this function checks if the location has been changed since the\n    // last render and updates the state only when needed.\n    // unfortunately, we can't rely on `path` value here, since it can be stale,\n    // that's why we store the last pathname in a ref.\n    const checkForUpdates = () => {\n      const pathname = currentPathname(base);\n      prevPath.current !== pathname && update((prevPath.current = pathname));\n    };\n\n    const events = [\"popstate\", \"pushState\", \"replaceState\"];\n    events.map((e) => addEventListener(e, checkForUpdates));\n\n    // it's possible that an update has occurred between render and the effect handler,\n    // so we run additional check on mount to catch these updates. Based on:\n    // https://gist.github.com/bvaughn/e25397f70e8c65b0ae0d7c90b731b189\n    checkForUpdates();\n\n    return () => events.map((e) => removeEventListener(e, checkForUpdates));\n  }, [base]);\n\n  // the 2nd argument of the `useLocation` return value is a function\n  // that allows to perform a navigation.\n  //\n  // the function reference should stay the same between re-renders, so that\n  // it can be passed down as an element prop without any performance concerns.\n  const navigate = useCallback(\n    (to, { replace = false } = {}) =>\n      history[replace ? \"replaceState\" : \"pushState\"](0, 0, base + to),\n    [base]\n  );\n\n  return [path, navigate];\n};\n\n// While History API does have `popstate` event, the only\n// proper way to listen to changes via `push/replaceState`\n// is to monkey-patch these methods.\n//\n// See https://stackoverflow.com/a/4585031\n\nlet patched = 0;\n\nconst patchHistoryEvents = () => {\n  if (patched) return;\n\n  [\"pushState\", \"replaceState\"].map((type) => {\n    const original = history[type];\n\n    history[type] = function() {\n      const result = original.apply(this, arguments);\n      const event = new Event(type);\n      event.arguments = arguments;\n\n      dispatchEvent(event);\n      return result;\n    };\n  });\n\n  return (patched = 1);\n};\n\nconst currentPathname = (base, path = location.pathname) =>\n  !path.indexOf(base) ? path.slice(base.length) || \"/\" : path;\n","export default function isDocumentVisible() {\n    if (typeof document !== 'undefined' &&\n        typeof document.visibilityState !== 'undefined') {\n        return document.visibilityState !== 'hidden';\n    }\n    // always assume it's visible\n    return true;\n}\n","export default function isOnline() {\n    if (typeof navigator.onLine !== 'undefined') {\n        return navigator.onLine;\n    }\n    // always assume it's online\n    return true;\n}\n","// use WeakMap to store the object->key mapping\n// so the objects can be garbage collected.\n// WeakMap uses a hashtable under the hood, so the lookup\n// complexity is almost O(1).\nvar table = new WeakMap();\n// counter of the key\nvar counter = 0;\n// hashes an array of objects and returns a string\nexport default function hash(args) {\n    if (!args.length)\n        return '';\n    var key = 'arg';\n    for (var i = 0; i < args.length; ++i) {\n        var _hash = void 0;\n        if (args[i] === null || typeof args[i] !== 'object') {\n            // need to consider the case that args[i] is a string:\n            // args[i]        _hash\n            // \"undefined\" -> '\"undefined\"'\n            // undefined   -> 'undefined'\n            // 123         -> '123'\n            // null        -> 'null'\n            // \"null\"      -> '\"null\"'\n            if (typeof args[i] === 'string') {\n                _hash = '\"' + args[i] + '\"';\n            }\n            else {\n                _hash = String(args[i]);\n            }\n        }\n        else {\n            if (!table.has(args[i])) {\n                _hash = counter;\n                table.set(args[i], counter++);\n            }\n            else {\n                _hash = table.get(args[i]);\n            }\n        }\n        key += '@' + _hash;\n    }\n    return key;\n}\n","import { mutate } from './use-swr';\nimport hash from './libs/hash';\nvar Cache = /** @class */ (function () {\n    function Cache(initialData) {\n        if (initialData === void 0) { initialData = {}; }\n        this.__cache = new Map(Object.entries(initialData));\n        this.__listeners = [];\n    }\n    Cache.prototype.get = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.get(_key);\n    };\n    Cache.prototype.set = function (key, value, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        this.__cache.set(_key, value);\n        if (shouldNotify)\n            mutate(key, value, false);\n        this.notify();\n    };\n    Cache.prototype.keys = function () {\n        return Array.from(this.__cache.keys());\n    };\n    Cache.prototype.has = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.has(_key);\n    };\n    Cache.prototype.clear = function (shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        if (shouldNotify)\n            this.__cache.forEach(function (key) { return mutate(key, null, false); });\n        this.__cache.clear();\n        this.notify();\n    };\n    Cache.prototype.delete = function (key, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        if (shouldNotify)\n            mutate(key, null, false);\n        this.__cache.delete(_key);\n        this.notify();\n    };\n    // TODO: introduce namespace for the cache\n    Cache.prototype.serializeKey = function (key) {\n        var args = null;\n        if (typeof key === 'function') {\n            try {\n                key = key();\n            }\n            catch (err) {\n                // dependencies not ready\n                key = '';\n            }\n        }\n        if (Array.isArray(key)) {\n            // args array\n            args = key;\n            key = hash(key);\n        }\n        else {\n            // convert null to ''\n            key = String(key || '');\n        }\n        var errorKey = key ? 'err@' + key : '';\n        return [key, args, errorKey];\n    };\n    Cache.prototype.subscribe = function (listener) {\n        var _this = this;\n        if (typeof listener !== 'function') {\n            throw new Error('Expected the listener to be a function.');\n        }\n        var isSubscribed = true;\n        this.__listeners.push(listener);\n        return function () {\n            if (!isSubscribed)\n                return;\n            isSubscribed = false;\n            var index = _this.__listeners.indexOf(listener);\n            if (index > -1) {\n                _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n                _this.__listeners.length--;\n            }\n        };\n    };\n    // Notify Cache subscribers about a change in the cache\n    Cache.prototype.notify = function () {\n        for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n    };\n    return Cache;\n}());\nexport default Cache;\n","import deepEqual from 'fast-deep-equal';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport Cache from './cache';\n// cache\nvar cache = new Cache();\n// state managers\nvar CONCURRENT_PROMISES = {};\nvar CONCURRENT_PROMISES_TS = {};\nvar FOCUS_REVALIDATORS = {};\nvar CACHE_REVALIDATORS = {};\nvar MUTATION_TS = {};\n// error retry\nfunction onErrorRetry(_, __, config, revalidate, opts) {\n    if (!isDocumentVisible()) {\n        // if it's hidden, stop\n        // it will auto revalidate when focus\n        return;\n    }\n    if (config.errorRetryCount && opts.retryCount > config.errorRetryCount) {\n        return;\n    }\n    // exponential backoff\n    var count = Math.min(opts.retryCount || 0, 8);\n    var timeout = ~~((Math.random() + 0.5) * (1 << count)) * config.errorRetryInterval;\n    setTimeout(revalidate, timeout, opts);\n}\n// client side: need to adjust the config\n// based on the browser status\n// slow connection (<= 70Kbps)\nvar slowConnection = typeof window !== 'undefined' &&\n    navigator['connection'] &&\n    ['slow-2g', '2g'].indexOf(navigator['connection'].effectiveType) !== -1;\n// config\nvar defaultConfig = {\n    // events\n    onLoadingSlow: function () { },\n    onSuccess: function () { },\n    onError: function () { },\n    onErrorRetry: onErrorRetry,\n    errorRetryInterval: (slowConnection ? 10 : 5) * 1000,\n    focusThrottleInterval: 5 * 1000,\n    dedupingInterval: 2 * 1000,\n    loadingTimeout: (slowConnection ? 5 : 3) * 1000,\n    refreshInterval: 0,\n    revalidateOnFocus: true,\n    revalidateOnReconnect: true,\n    refreshWhenHidden: false,\n    refreshWhenOffline: false,\n    shouldRetryOnError: true,\n    suspense: false,\n    compare: deepEqual\n};\n// Focus revalidate\nvar eventsBinded = false;\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n    var revalidate = function () {\n        if (!isDocumentVisible() || !isOnline())\n            return;\n        for (var key in FOCUS_REVALIDATORS) {\n            if (FOCUS_REVALIDATORS[key][0])\n                FOCUS_REVALIDATORS[key][0]();\n        }\n    };\n    window.addEventListener('visibilitychange', revalidate, false);\n    window.addEventListener('focus', revalidate, false);\n    // only bind the events once\n    eventsBinded = true;\n}\nexport { CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, CACHE_REVALIDATORS, MUTATION_TS, cache };\nexport default defaultConfig;\n","export default function throttle(fn, interval) {\n    var pending = false;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (pending)\n            return;\n        pending = true;\n        fn.apply(void 0, args);\n        setTimeout(function () { return (pending = false); }, interval);\n    };\n}\n","import { createContext } from 'react';\nvar SWRConfigContext = createContext({});\nSWRConfigContext.displayName = 'SWRConfigContext';\nexport default SWRConfigContext;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useCallback, useContext, useEffect, useLayoutEffect, useState, useRef, useMemo } from 'react';\nimport defaultConfig, { CACHE_REVALIDATORS, CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, MUTATION_TS, cache } from './config';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport throttle from './libs/throttle';\nimport SWRConfigContext from './swr-config-context';\nvar IS_SERVER = typeof window === 'undefined';\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\nvar useIsomorphicLayoutEffect = IS_SERVER ? useEffect : useLayoutEffect;\nvar trigger = function (_key, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    // we are ignoring the second argument which correspond to the arguments\n    // the fetcher will receive when key is an array\n    var _a = cache.serializeKey(_key), key = _a[0], keyErr = _a[2];\n    if (!key)\n        return Promise.resolve();\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        var currentData = cache.get(key);\n        var currentError = cache.get(keyErr);\n        var promises = [];\n        for (var i = 0; i < updaters.length; ++i) {\n            promises.push(updaters[i](shouldRevalidate, currentData, currentError, i > 0));\n        }\n        // return new updated value\n        return Promise.all(promises).then(function () { return cache.get(key); });\n    }\n    return Promise.resolve(cache.get(key));\n};\nvar broadcastState = function (key, data, error) {\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        for (var i = 0; i < updaters.length; ++i) {\n            updaters[i](false, data, error);\n        }\n    }\n};\nvar mutate = function (_key, _data, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var key, data, error, beforeMutationTs, beforeConcurrentPromisesTs, err_1, err_2, updaters, promises, i;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    key = cache.serializeKey(_key)[0];\n                    if (!key)\n                        return [2 /*return*/];\n                    // if there is no new data, call revalidate against the key\n                    if (typeof _data === 'undefined')\n                        return [2 /*return*/, trigger(_key, shouldRevalidate)\n                            // update timestamp\n                        ];\n                    // update timestamp\n                    MUTATION_TS[key] = Date.now() - 1;\n                    beforeMutationTs = MUTATION_TS[key];\n                    beforeConcurrentPromisesTs = CONCURRENT_PROMISES_TS[key];\n                    if (!(_data && typeof _data === 'function')) return [3 /*break*/, 5];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, _data(cache.get(key))];\n                case 2:\n                    data = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    error = err_1;\n                    return [3 /*break*/, 4];\n                case 4: return [3 /*break*/, 11];\n                case 5:\n                    if (!(_data && typeof _data.then === 'function')) return [3 /*break*/, 10];\n                    _a.label = 6;\n                case 6:\n                    _a.trys.push([6, 8, , 9]);\n                    return [4 /*yield*/, _data];\n                case 7:\n                    data = _a.sent();\n                    return [3 /*break*/, 9];\n                case 8:\n                    err_2 = _a.sent();\n                    error = err_2;\n                    return [3 /*break*/, 9];\n                case 9: return [3 /*break*/, 11];\n                case 10:\n                    data = _data;\n                    _a.label = 11;\n                case 11:\n                    // Check if other mutations have occurred since we've started awaiting, if so then do not persist this change\n                    if (beforeMutationTs !== MUTATION_TS[key] ||\n                        beforeConcurrentPromisesTs !== CONCURRENT_PROMISES_TS[key]) {\n                        if (error)\n                            throw error;\n                        return [2 /*return*/, data];\n                    }\n                    if (typeof data !== 'undefined') {\n                        // update cached data, avoid notifying from the cache\n                        cache.set(key, data, false);\n                    }\n                    updaters = CACHE_REVALIDATORS[key];\n                    if (updaters) {\n                        promises = [];\n                        for (i = 0; i < updaters.length; ++i) {\n                            promises.push(updaters[i](!!shouldRevalidate, data, error, i > 0));\n                        }\n                        // return new updated value\n                        return [2 /*return*/, Promise.all(promises).then(function () { return cache.get(key); })];\n                    }\n                    // throw error or return data to be used by caller of mutate\n                    if (error)\n                        throw error;\n                    return [2 /*return*/, data];\n            }\n        });\n    });\n};\nfunction useSWR() {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var _key, fn, config = {};\n    if (args.length >= 1) {\n        _key = args[0];\n    }\n    if (args.length > 2) {\n        fn = args[1];\n        config = args[2];\n    }\n    else {\n        if (typeof args[1] === 'function') {\n            fn = args[1];\n        }\n        else if (typeof args[1] === 'object') {\n            config = args[1];\n        }\n    }\n    // we assume `key` as the identifier of the request\n    // `key` can change but `fn` shouldn't\n    // (because `revalidate` only depends on `key`)\n    // `keyErr` is the cache key for error objects\n    var _a = cache.serializeKey(_key), key = _a[0], fnArgs = _a[1], keyErr = _a[2];\n    config = Object.assign({}, defaultConfig, useContext(SWRConfigContext), config);\n    if (typeof fn === 'undefined') {\n        // use a global fetcher\n        fn = config.fetcher;\n    }\n    var initialData = cache.get(key) || config.initialData;\n    var initialError = cache.get(keyErr);\n    // if a state is accessed (data, error or isValidating),\n    // we add the state to dependencies so if the state is\n    // updated in the future, we can trigger a rerender\n    var stateDependencies = useRef({\n        data: false,\n        error: false,\n        isValidating: false\n    });\n    var stateRef = useRef({\n        data: initialData,\n        error: initialError,\n        isValidating: false\n    });\n    var rerender = useState(null)[1];\n    var dispatch = useCallback(function (payload) {\n        var shouldUpdateState = false;\n        for (var k in payload) {\n            stateRef.current[k] = payload[k];\n            if (stateDependencies.current[k]) {\n                shouldUpdateState = true;\n            }\n        }\n        if (shouldUpdateState || config.suspense) {\n            rerender({});\n        }\n    }, []);\n    // error ref inside revalidate (is last request errored?)\n    var unmountedRef = useRef(false);\n    var keyRef = useRef(key);\n    // do unmount check for callbacks\n    var eventsRef = useRef({\n        emit: function (event) {\n            var params = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                params[_i - 1] = arguments[_i];\n            }\n            if (unmountedRef.current)\n                return;\n            config[event].apply(config, params);\n        }\n    });\n    var boundMutate = useCallback(function (data, shouldRevalidate) {\n        return mutate(key, data, shouldRevalidate);\n    }, [key]);\n    // start a revalidation\n    var revalidate = useCallback(function (revalidateOpts) {\n        if (revalidateOpts === void 0) { revalidateOpts = {}; }\n        return __awaiter(_this, void 0, void 0, function () {\n            var loading, shouldDeduping, newData, startAt, newState, err_3, retryCount;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!key || !fn)\n                            return [2 /*return*/, false];\n                        if (unmountedRef.current)\n                            return [2 /*return*/, false];\n                        revalidateOpts = Object.assign({ dedupe: false }, revalidateOpts);\n                        loading = true;\n                        shouldDeduping = typeof CONCURRENT_PROMISES[key] !== 'undefined' && revalidateOpts.dedupe;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 6, , 7]);\n                        dispatch({\n                            isValidating: true\n                        });\n                        newData = void 0;\n                        startAt = void 0;\n                        if (!shouldDeduping) return [3 /*break*/, 3];\n                        // there's already an ongoing request,\n                        // this one needs to be deduplicated.\n                        startAt = CONCURRENT_PROMISES_TS[key];\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 2:\n                        newData = _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3:\n                        // if not deduping the request (hard revalidate) but\n                        // there're other ongoing request(s) at the same time,\n                        // we need to ignore the other result(s) to avoid\n                        // possible race conditions:\n                        // req1------------------>res1\n                        //      req2-------->res2\n                        // in that case, the second response should not be overridden\n                        // by the first one.\n                        if (CONCURRENT_PROMISES[key]) {\n                            // we can mark it as a mutation to ignore\n                            // all requests which are fired before this one\n                            MUTATION_TS[key] = Date.now() - 1;\n                        }\n                        // if no cache being rendered currently (it shows a blank page),\n                        // we trigger the loading slow event.\n                        if (config.loadingTimeout && !cache.get(key)) {\n                            setTimeout(function () {\n                                if (loading)\n                                    eventsRef.current.emit('onLoadingSlow', key, config);\n                            }, config.loadingTimeout);\n                        }\n                        if (fnArgs !== null) {\n                            CONCURRENT_PROMISES[key] = fn.apply(void 0, fnArgs);\n                        }\n                        else {\n                            CONCURRENT_PROMISES[key] = fn(key);\n                        }\n                        CONCURRENT_PROMISES_TS[key] = startAt = Date.now();\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 4:\n                        newData = _a.sent();\n                        setTimeout(function () {\n                            delete CONCURRENT_PROMISES[key];\n                            delete CONCURRENT_PROMISES_TS[key];\n                        }, config.dedupingInterval);\n                        // trigger the success event,\n                        // only do this for the original request.\n                        eventsRef.current.emit('onSuccess', newData, key, config);\n                        _a.label = 5;\n                    case 5:\n                        // if the revalidation happened earlier than the local mutation,\n                        // we have to ignore the result because it could override.\n                        // meanwhile, a new revalidation should be triggered by the mutation.\n                        if (MUTATION_TS[key] && startAt <= MUTATION_TS[key]) {\n                            dispatch({ isValidating: false });\n                            return [2 /*return*/, false];\n                        }\n                        cache.set(key, newData, false);\n                        cache.set(keyErr, undefined, false);\n                        newState = {\n                            isValidating: false\n                        };\n                        if (typeof stateRef.current.error !== 'undefined') {\n                            // we don't have an error\n                            newState.error = undefined;\n                        }\n                        if (!config.compare(stateRef.current.data, newData)) {\n                            // deep compare to avoid extra re-render\n                            // data changed\n                            newState.data = newData;\n                        }\n                        // merge the new state\n                        dispatch(newState);\n                        if (!shouldDeduping) {\n                            // also update other hooks\n                            broadcastState(key, newData, undefined);\n                        }\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_3 = _a.sent();\n                        delete CONCURRENT_PROMISES[key];\n                        delete CONCURRENT_PROMISES_TS[key];\n                        cache.set(keyErr, err_3, false);\n                        // get a new error\n                        // don't use deep equal for errors\n                        if (stateRef.current.error !== err_3) {\n                            // we keep the stale data\n                            dispatch({\n                                isValidating: false,\n                                error: err_3\n                            });\n                            if (!shouldDeduping) {\n                                // also broadcast to update other hooks\n                                broadcastState(key, undefined, err_3);\n                            }\n                        }\n                        // events and retry\n                        eventsRef.current.emit('onError', err_3, key, config);\n                        if (config.shouldRetryOnError) {\n                            retryCount = (revalidateOpts.retryCount || 0) + 1;\n                            eventsRef.current.emit('onErrorRetry', err_3, key, config, revalidate, Object.assign({ dedupe: true }, revalidateOpts, { retryCount: retryCount }));\n                        }\n                        return [3 /*break*/, 7];\n                    case 7:\n                        loading = false;\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    }, [key]);\n    // mounted (client side rendering)\n    useIsomorphicLayoutEffect(function () {\n        if (!key)\n            return undefined;\n        // after `key` updates, we need to mark it as mounted\n        unmountedRef.current = false;\n        // after the component is mounted (hydrated),\n        // we need to update the data from the cache\n        // and trigger a revalidation\n        var currentHookData = stateRef.current.data;\n        var latestKeyedData = cache.get(key) || config.initialData;\n        // update the state if the key changed (not the inital render) or cache updated\n        if (keyRef.current !== key ||\n            !config.compare(currentHookData, latestKeyedData)) {\n            dispatch({ data: latestKeyedData });\n            keyRef.current = key;\n        }\n        // revalidate with deduping\n        var softRevalidate = function () { return revalidate({ dedupe: true }); };\n        // trigger a revalidation\n        if (config.revalidateOnMount ||\n            (!config.initialData && config.revalidateOnMount === undefined)) {\n            if (typeof latestKeyedData !== 'undefined' &&\n                !IS_SERVER &&\n                window['requestIdleCallback']) {\n                // delay revalidate if there's cache\n                // to not block the rendering\n                window['requestIdleCallback'](softRevalidate);\n            }\n            else {\n                softRevalidate();\n            }\n        }\n        // whenever the window gets focused, revalidate\n        var onFocus;\n        if (config.revalidateOnFocus) {\n            // throttle: avoid being called twice from both listeners\n            // and tabs being switched quickly\n            onFocus = throttle(softRevalidate, config.focusThrottleInterval);\n            if (!FOCUS_REVALIDATORS[key]) {\n                FOCUS_REVALIDATORS[key] = [onFocus];\n            }\n            else {\n                FOCUS_REVALIDATORS[key].push(onFocus);\n            }\n        }\n        // register global cache update listener\n        var onUpdate = function (shouldRevalidate, updatedData, updatedError, dedupe) {\n            if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n            if (dedupe === void 0) { dedupe = true; }\n            // update hook state\n            var newState = {};\n            var needUpdate = false;\n            if (typeof updatedData !== 'undefined' &&\n                !config.compare(stateRef.current.data, updatedData)) {\n                newState.data = updatedData;\n                needUpdate = true;\n            }\n            // always update error\n            // because it can be `undefined`\n            if (stateRef.current.error !== updatedError) {\n                newState.error = updatedError;\n                needUpdate = true;\n            }\n            if (needUpdate) {\n                dispatch(newState);\n            }\n            if (shouldRevalidate) {\n                if (dedupe) {\n                    return softRevalidate();\n                }\n                else {\n                    return revalidate();\n                }\n            }\n            return false;\n        };\n        // add updater to listeners\n        if (!CACHE_REVALIDATORS[key]) {\n            CACHE_REVALIDATORS[key] = [onUpdate];\n        }\n        else {\n            CACHE_REVALIDATORS[key].push(onUpdate);\n        }\n        // set up reconnecting when the browser regains network connection\n        var reconnect = null;\n        if (!IS_SERVER && window.addEventListener && config.revalidateOnReconnect) {\n            window.addEventListener('online', (reconnect = softRevalidate));\n        }\n        return function () {\n            // cleanup\n            dispatch = function () { return null; };\n            // mark it as unmounted\n            unmountedRef.current = true;\n            if (onFocus && FOCUS_REVALIDATORS[key]) {\n                var revalidators = FOCUS_REVALIDATORS[key];\n                var index = revalidators.indexOf(onFocus);\n                if (index >= 0) {\n                    // 10x faster than splice\n                    // https://jsperf.com/array-remove-by-index\n                    revalidators[index] = revalidators[revalidators.length - 1];\n                    revalidators.pop();\n                }\n            }\n            if (CACHE_REVALIDATORS[key]) {\n                var revalidators = CACHE_REVALIDATORS[key];\n                var index = revalidators.indexOf(onUpdate);\n                if (index >= 0) {\n                    revalidators[index] = revalidators[revalidators.length - 1];\n                    revalidators.pop();\n                }\n            }\n            if (!IS_SERVER && window.removeEventListener && reconnect !== null) {\n                window.removeEventListener('online', reconnect);\n            }\n        };\n    }, [key, revalidate]);\n    // set up polling\n    useIsomorphicLayoutEffect(function () {\n        var timer = null;\n        var tick = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!stateRef.current.error &&\n                            (config.refreshWhenHidden || isDocumentVisible()) &&\n                            (config.refreshWhenOffline || isOnline()))) return [3 /*break*/, 2];\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        return [4 /*yield*/, revalidate({ dedupe: true })];\n                    case 1:\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (config.refreshInterval) {\n                            timer = setTimeout(tick, config.refreshInterval);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        if (config.refreshInterval) {\n            timer = setTimeout(tick, config.refreshInterval);\n        }\n        return function () {\n            if (timer)\n                clearTimeout(timer);\n        };\n    }, [\n        config.refreshInterval,\n        config.refreshWhenHidden,\n        config.refreshWhenOffline,\n        revalidate\n    ]);\n    // suspense\n    if (config.suspense) {\n        // in suspense mode, we can't return empty state\n        // (it should be suspended)\n        // try to get data and error from cache\n        var latestData = cache.get(key) || initialData;\n        var latestError = cache.get(keyErr) || initialError;\n        if (typeof latestData === 'undefined' &&\n            typeof latestError === 'undefined') {\n            // need to start the request if it hasn't\n            if (!CONCURRENT_PROMISES[key]) {\n                // trigger revalidate immediately\n                // to get the promise\n                revalidate();\n            }\n            if (CONCURRENT_PROMISES[key] &&\n                typeof CONCURRENT_PROMISES[key].then === 'function') {\n                // if it is a promise\n                throw CONCURRENT_PROMISES[key];\n            }\n            // it's a value, return it directly (override)\n            latestData = CONCURRENT_PROMISES[key];\n        }\n        if (typeof latestData === 'undefined' && latestError) {\n            // in suspense mode, throw error if there's no content\n            throw latestError;\n        }\n        // return the latest data / error from cache\n        // in case `key` has changed\n        return {\n            error: latestError,\n            data: latestData,\n            revalidate: revalidate,\n            mutate: boundMutate,\n            isValidating: stateRef.current.isValidating\n        };\n    }\n    // define returned state\n    // can be memorized since the state is a ref\n    return useMemo(function () {\n        var state = { revalidate: revalidate, mutate: boundMutate };\n        Object.defineProperties(state, {\n            error: {\n                // `key` might be changed in the upcoming hook re-render,\n                // but the previous state will stay\n                // so we need to match the latest key and data (fallback to `initialData`)\n                get: function () {\n                    stateDependencies.current.error = true;\n                    return keyRef.current === key ? stateRef.current.error : initialError;\n                },\n                enumerable: true\n            },\n            data: {\n                get: function () {\n                    stateDependencies.current.data = true;\n                    return keyRef.current === key ? stateRef.current.data : initialData;\n                },\n                enumerable: true\n            },\n            isValidating: {\n                get: function () {\n                    stateDependencies.current.isValidating = true;\n                    return stateRef.current.isValidating;\n                },\n                enumerable: true\n            }\n        });\n        return state;\n    }, [revalidate]);\n}\nvar SWRConfig = SWRConfigContext.Provider;\nexport { trigger, mutate, SWRConfig };\nexport default useSWR;\n","var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport React, { useCallback, useMemo, useState, useRef } from 'react';\nimport { cache } from './config';\n/*\nThe idea\n\nA \"Page\" component renders the content of 1 API request, it accepts an offset (in this example it's from),\nuses a SWR hook (useSWR(API + '?limit=' + limit + '&from=' + from)) and returns items (Projects).\n\nThe UI:\n      +------------------------------------------+\n      |   Projects                               |\n+------------------------------------------------------+\n|     |   +----------------+                     |     |\n|     |                                          |     |\n|     |   +------------+                         |     |\n|     |                                          |     +--> 1 Page\n|     |   +-----------------+                    |     |\n|     |                                          |     |  /projects/list?limit=4\n|     |   +---------+                            |     |\n+------------------------------------------------------+\n      |                                          |\n      |   +------------+                         |     +  /projects/list?limit=4&from=123\n      |                                          |     |\n      |   +----------------+                     |     |\n      |                                          |     |\n      |   +---------+                            |     |\n      |                                          |     |\n      |   +--------------+                       |     +\n      |                                          |\n      |   +-------------------+                  |     +  /projects/list?limit=4&from=456\n      |                                          |     |\n      |   +------------+                         |     |\n      |                                          |     |\n      |   +----------------+                     |     |\n      |                                          |     |\n      |                                          |     +\n\nThe API\n// (inside `render`)\n\nfunction App () {\n  const {\n    pages,    // an array of each page component\n    pageSWRs, // an array of SWRs of each page\n    isLoadingMore,\n    isReachingEnd,\n    isEmpty,\n    loadMore\n  } = useSWRPages(\n    'project-page', // key of this page\n\n    // ======== the actual Page component!\n    ({ offset, withSWR }) => {\n      // required: use `withSWR` to wrap your main SWR (source of your pagination API)\n      const { data } = withSWR(\n        useSWR(API + '?limit=10&from=' + offset) // request projects with offset\n      )\n      if (!data) return <Placeholder>\n      return data.projects.map(project => <Card project={project} team={team}>)\n    },\n    // ========\n\n    // a function accepts a SWR's `data`, and returns the offset of the next page (or null)\n    data => data && data.length >= 10 ? data[data.length - 1].createdAt : null,\n\n    // (optional) outside deps of your Page component. in this case it's empty\n    []\n  )\n\n  // ...\n\n  if (isEmpty) return <EmptyProjectsPage/>\n\n  return <div>\n    {pages}\n    {isReachingEnd\n      ? null\n      : <button loading={isLoadingMore} onClick={loadMore}>Load More</button>}\n  </div>\n}\n*/\nvar pageCacheMap = new Map();\nexport function useSWRPages(pageKey, pageFn, SWRToOffset, deps) {\n    if (deps === void 0) { deps = []; }\n    var pageCountKey = \"_swr_page_count_\" + pageKey;\n    var pageOffsetKey = \"_swr_page_offset_\" + pageKey;\n    var _a = useState(cache.get(pageCountKey) || 1), pageCount = _a[0], setPageCount = _a[1];\n    var _b = useState(cache.get(pageOffsetKey) || [null]), pageOffsets = _b[0], setPageOffsets = _b[1];\n    var _c = useState([]), pageSWRs = _c[0], setPageSWRs = _c[1];\n    var pageFnRef = useRef(pageFn);\n    var emptyPageRef = useRef(false);\n    // Page component (wraps `pageFn`)\n    // for performance reason we need to memorize it\n    var Page = useCallback(function (props) {\n        // render the page component\n        var dataList = pageFnRef.current(props);\n        // if dataList is [], we can assume this page is empty\n        // TODO: this API is not stable\n        if (dataList && !dataList.length) {\n            emptyPageRef.current = true;\n        }\n        else {\n            emptyPageRef.current = false;\n        }\n        return dataList;\n    }, []);\n    // Doesn't have a next page\n    var isReachingEnd = pageOffsets[pageCount] === null;\n    var isLoadingMore = pageCount === pageOffsets.length;\n    var isEmpty = isReachingEnd && pageCount === 1 && emptyPageRef.current;\n    var loadMore = useCallback(function () {\n        if (isLoadingMore || isReachingEnd)\n            return;\n        setPageCount(function (c) {\n            cache.set(pageCountKey, c + 1);\n            return c + 1;\n        });\n    }, [isLoadingMore || isReachingEnd]);\n    var _pageFn = useCallback(pageFn, deps);\n    pageFnRef.current = _pageFn;\n    var pages = useMemo(function () {\n        var getWithSWR = function (id) { return function (swr) {\n            if (!pageSWRs[id] ||\n                pageSWRs[id].data !== swr.data ||\n                pageSWRs[id].error !== swr.error ||\n                pageSWRs[id].revalidate !== swr.revalidate) {\n                // hoist side effects: setPageSWRs and setPageOffsets -- https://reactjs.org/blog/2020/02/26/react-v16.13.0.html#warnings-for-some-updates-during-render\n                setTimeout(function () {\n                    setPageSWRs(function (swrs) {\n                        var _swrs = __spreadArrays(swrs);\n                        _swrs[id] = {\n                            data: swr.data,\n                            error: swr.error,\n                            revalidate: swr.revalidate,\n                            isValidating: swr.isValidating,\n                            mutate: swr.mutate\n                        };\n                        return _swrs;\n                    });\n                    if (typeof swr.data !== 'undefined') {\n                        // set next page's offset\n                        var newPageOffset_1 = SWRToOffset(swr, id);\n                        if (pageOffsets[id + 1] !== newPageOffset_1) {\n                            setPageOffsets(function (arr) {\n                                var _arr = __spreadArrays(arr);\n                                _arr[id + 1] = newPageOffset_1;\n                                cache.set(pageOffsetKey, _arr);\n                                return _arr;\n                            });\n                        }\n                    }\n                });\n            }\n            return swr;\n        }; };\n        // render each page\n        var p = [];\n        if (!pageCacheMap.has(pageKey)) {\n            pageCacheMap.set(pageKey, []);\n        }\n        var pageCache = pageCacheMap.get(pageKey);\n        for (var i = 0; i < pageCount; ++i) {\n            if (!pageCache[i] ||\n                pageCache[i].offset !== pageOffsets[i] ||\n                pageCache[i].pageFn !== _pageFn) {\n                // when props change or at init\n                // render the page and cache it\n                pageCache[i] = {\n                    component: (React.createElement(Page, { key: \"page-\" + pageOffsets[i] + \"-\" + i, offset: pageOffsets[i], withSWR: getWithSWR(i) })),\n                    pageFn: _pageFn,\n                    offset: pageOffsets[i]\n                };\n            }\n            p.push(pageCache[i].component);\n        }\n        return p;\n    }, [_pageFn, pageCount, pageSWRs, pageOffsets, pageKey]);\n    return {\n        pages: pages,\n        pageCount: pageCount,\n        pageSWRs: pageSWRs,\n        isLoadingMore: isLoadingMore,\n        isReachingEnd: isReachingEnd,\n        isEmpty: isEmpty,\n        loadMore: loadMore\n    };\n}\n","export * from './use-swr';\nimport { default as useSWR } from './use-swr';\nexport { useSWRPages } from './use-swr-pages';\nexport { cache } from './config';\nexport default useSWR;\n","const graphqlRequest = async (\n    operationName: string,\n    query: string\n): Promise<any> => {\n    if (typeof window === 'undefined') return []\n\n    let { data } = await graphqlBase(operationName, query)\n\n    return data\n}\n\nconst graphqlBase = async (\n    operationName: string,\n    query: string\n): Promise<any> => {\n    if (typeof window === 'undefined') return []\n\n    const response = await fetch('http://localhost/graphql', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        mode: 'cors',\n        credentials: 'include',\n        body: JSON.stringify({\n            query\n        })\n    })\n\n    const { data } = await response.json()\n\n    return data[operationName]\n}\n\nexport { graphqlBase }\n\nexport default graphqlRequest\n","import { h } from 'preact'\n\nimport BookComponent, { Book as BookProps } from './types'\n\nimport './book.styl'\n\nconst Book: BookComponent = ({\n    book,\n    preload = false,\n    hiddenPrice = false,\n    onClick = () => null,\n    action = 'Borrow',\n    style = {},\n    disabled = false\n}) => {\n    if (preload)\n        return (\n            <article class=\"book -preload\">\n                <section class=\"content\">\n                    <h1 class=\"title\" />\n                    <p class=\"author\" />\n                    {hiddenPrice || <p class=\"price\" />}\n                </section>\n                <button class=\"lend\" disabled={true} />\n            </article>\n        )\n\n    let { id, title, author, price } = book as BookProps\n\n    return (\n        <article class={`book ${id}`} style={style}>\n            <section class=\"content\">\n                <h1 class=\"title\">{title}</h1>\n                <p class=\"author\">{author}</p>\n                {hiddenPrice || <p class=\"price\">{price}</p>}\n            </section>\n            <button\n                class={`lend ${disabled ? '-disabled' : ''}`}\n                onClick={() => onClick(id)}\n                disabled={disabled}\n            >\n                {action}\n            </button>\n        </article>\n    )\n}\n\nexport default Book\n","import { h } from 'preact'\nimport { useState } from 'preact/hooks'\n\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../stores/types'\n\nimport useSWR from 'swr'\nimport graphqlRequest, { graphqlBase } from '../libs/graphql'\n\nimport BookDisplay from '../component/book'\nimport { Book } from '../component/book/types'\n\nimport '../styles/landing.styl'\nimport { Link } from 'wouter/preact'\n\nconst Landing = () => {\n    let { username } = useStoreon<UserStore, UserEvent>('username')\n\n    let [localBorrowed, updateBorrow] = useState<string[]>([])\n\n    if (!username)\n        return (\n            <section id=\"book-list\" class=\"-error\">\n                <h3 class=\"title\">Night Library</h3>\n                <p class=\"detail\">\n                    Online library management system written in Actix Web.\n                </p>\n                <Link href=\"/signin\">\n                    <a class=\"action\">Signin</a>\n                </Link>\n            </section>\n        )\n\n    let { data: books, error } = useSWR(\n        [\n            'listBook',\n            `{\n              listBook {\n                data {\n                  id,\n                  title,\n                  author,\n                  price\n                }\n              }\n            }`\n        ],\n        graphqlRequest\n    )\n\n    let { data: borrowed, error: borrowedError } = useSWR(\n        [\n            'listBorrowed',\n            `{\n              listBorrowed {\n                data {\n                  id\n                }\n              }\n            }`\n        ],\n        graphqlRequest\n    )\n\n    if (error || borrowedError)\n        return (\n            <section id=\"book-list\" class=\"-error\">\n                <h3 class=\"title\">Failed to fetch</h3>\n                <p class=\"detail\">\n                    There is a problem requesting an list of books.\n                </p>\n                <button class=\"action\" onClick={() => window.location.reload()}>\n                    Retry\n                </button>\n            </section>\n        )\n\n    if (!books || !borrowed)\n        return (\n            <section id=\"book-list\">\n                <h1 class=\"header\">Book List</h1>\n                {Array(8)\n                    .fill(null)\n                    .map((_, index) => (\n                        <BookDisplay key={index} preload />\n                    ))}\n            </section>\n        )\n\n    let borrowedIdList = borrowed.map(({ id }: { id: string }) => id)\n\n    let returnBook = async (id: string) => {\n        let { data: borrowedList, success } = await graphqlBase(\n            'borrowBooks',\n            `mutation {\n              borrowBooks(books: [\"${id}\"]) {\n                data\n                success\n              }\n            }`\n        )\n\n        if (!success) return console.log('Something went wrong')\n\n        updateBorrow(borrowedList)\n    }\n\n    return (\n        <section id=\"book-list\">\n            <h1 class=\"header\">Book List</h1>\n            {books.map((book: Book) => {\n                let isBorrowed =\n                    borrowedIdList.length || localBorrowed.length\n                        ? borrowedIdList.includes(book.id) ||\n                          localBorrowed.includes(book.id)\n                        : false\n\n                return (\n                    <BookDisplay\n                        key={book.id}\n                        {...{ book }}\n                        style={isBorrowed ? { opacity: 0.5 } : {}}\n                        action={isBorrowed ? 'Borrowed' : 'Borrow'}\n                        onClick={returnBook}\n                        disabled={isBorrowed}\n                    />\n                )\n            })}\n        </section>\n    )\n}\n\nexport default Landing\n","import { h } from 'preact'\nimport {\n    useState,\n    useRef,\n    useReducer,\n    useCallback,\n    useEffect\n} from 'preact/hooks'\n\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../stores/types'\n\nimport { Link, Redirect } from 'wouter/preact'\n\nimport '../styles/sign.styl'\n\nconst Signin = () => {\n    let [error, updateError] = useState(''),\n        [redirect, allowRedirect] = useReducer(_ => true, false)\n\n    let username = useRef(''),\n        password = useRef('')\n\n    let { dispatch } = useStoreon<UserStore, UserEvent>()\n\n    useEffect(() => {\n        fetch('http://localhost/api/refresh', {\n            method: 'POST',\n            credentials: 'include'\n        })\n            .then(res => res.text())\n            .then(res => {\n                if (res) allowRedirect(1)\n            })\n    }, [])\n\n    let updateUsername = useCallback((event: any) => {\n            username.current = event.currentTarget.value\n        }, []),\n        updatePassword = useCallback((event: any) => {\n            password.current = event.currentTarget.value\n        }, [])\n\n    let login = useCallback(async (event: Event) => {\n        event.preventDefault()\n\n        if (!username.current || !password.current)\n            return updateError(\"Username and Password can't be blank\")\n\n        let response = await fetch('http://localhost/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type':\n                    'application/x-www-form-urlencoded;charset=UTF-8'\n            },\n            credentials: 'include',\n            body: new URLSearchParams({\n                username: username.current,\n                password: password.current\n            })\n        }).then(data => data.json())\n\n        if (response.success || response.info === 'Already signin in') {\n            dispatch('UPDATE_USERNAME', username.current)\n            allowRedirect(1)\n        } else updateError(response.info)\n    }, [])\n\n    return (\n        <form\n            id=\"login\"\n            action=\"http://localhost/login\"\n            method=\"POST\"\n            onSubmit={login}\n        >\n            <h1 class=\"title\">Signin</h1>\n            <label class=\"label\" for=\"username\">\n                Username\n            </label>\n            <input\n                class=\"input username\"\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Username\"\n                onInput={updateUsername}\n            />\n            <label class=\"label\" for=\"password\">\n                Password\n            </label>\n            <input\n                class=\"input password\"\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Password\"\n                onChange={updatePassword}\n            />\n            {error && <p class=\"warning -hidden\">{error}</p>}\n            <section class=\"action\">\n                <button class=\"login\">Signin</button>\n                <Link href=\"/signup\">\n                    <a class=\"link\">Signup</a>\n                </Link>\n            </section>\n            {redirect && <Redirect href=\"/\" />}\n        </form>\n    )\n}\n\nexport default Signin\n","import { h } from 'preact'\nimport {\n    useState,\n    useRef,\n    useReducer,\n    useCallback,\n    useEffect\n} from 'preact/hooks'\n\nimport { Link, Redirect } from 'wouter/preact'\n\nimport '../styles/sign.styl'\n\nconst Signin = () => {\n    let [error, updateError] = useState(''),\n        [redirect, allowRedirect] = useReducer(_ => true, false)\n\n    let username = useRef(''),\n        password = useRef(''),\n        confirmPassword = useRef('')\n\n    useEffect(() => {\n        fetch('http://localhost/api/refresh', {\n            method: 'POST',\n            credentials: 'include'\n        })\n            .then(res => res.text())\n            .then(res => {\n                if (res) allowRedirect(1)\n            })\n    }, [])\n\n    let updateUsername = useCallback((event: any) => {\n            username.current = event.currentTarget.value\n        }, []),\n        updatePassword = useCallback((event: any) => {\n            password.current = event.currentTarget.value\n        }, []),\n        updateConfirmPassword = useCallback((event: any) => {\n            confirmPassword.current = event.currentTarget.value\n        }, [])\n\n    let login = useCallback(async (event: Event) => {\n        event.preventDefault()\n\n        if (!username.current || !password.current)\n            return updateError(\"Username and Password can't be blank\")\n\n        if (password.current !== confirmPassword.current)\n            return updateError(\"Password doesn't match\")\n\n        let response = await fetch('http://localhost/register', {\n            method: 'POST',\n            headers: {\n                'Content-Type':\n                    'application/x-www-form-urlencoded;charset=UTF-8'\n            },\n            credentials: 'include',\n            body: new URLSearchParams({\n                username: username.current,\n                password: password.current\n            })\n        }).then(data => data.json())\n\n        if (response.success || response.info === 'Already signin in')\n            allowRedirect(1)\n        else updateError(response.info)\n    }, [])\n\n    return (\n        <form\n            id=\"login\"\n            action=\"http://localhost/register\"\n            method=\"POST\"\n            onSubmit={login}\n        >\n            <h1 class=\"title\">Signin</h1>\n            <label class=\"label\" for=\"username\">\n                Username\n            </label>\n            <input\n                class=\"input username\"\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Username\"\n                onInput={updateUsername}\n            />\n            <label class=\"label\" for=\"password\">\n                Password\n            </label>\n            <input\n                class=\"input password\"\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Password\"\n                onChange={updatePassword}\n            />\n            <label class=\"label\" for=\"confirm-password\">\n                Confirm Password\n            </label>\n            <input\n                class=\"input confirm-password\"\n                name=\"confirm-password\"\n                type=\"password\"\n                placeholder=\"Confirm Password\"\n                onChange={updateConfirmPassword}\n            />\n            {error && <p class=\"warning -hidden\">{error}</p>}\n            <section class=\"action\">\n                <button class=\"login\">Signup</button>\n                <Link href=\"/signin\">\n                    <a class=\"link\">Signin</a>\n                </Link>\n            </section>\n            {redirect && <Redirect href=\"/\" />}\n        </form>\n    )\n}\n\nexport default Signin\n","import { h } from 'preact'\n\nimport '../styles/not-found.styl'\n\nconst NotFound = () => (\n    <main id=\"not-found\">\n        <h1 class=\"title\">404</h1>\n        <p class=\"detail\">The page you're looking found is not found</p>\n    </main>\n)\n\nexport default NotFound\n","import { h } from 'preact'\nimport { useReducer } from 'preact/hooks'\n\nimport { Link, Redirect } from 'wouter/preact'\n\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../stores/types'\n\nimport '../styles/user.styl'\n\nconst User = () => {\n    let { dispatch } = useStoreon<UserStore, UserEvent>()\n\n    let [signout, requestSignout] = useReducer(_ => true, false)\n\n    let { username, initial } = useStoreon<UserStore, UserEvent>(\n        'username',\n        'initial'\n    )\n\n    let logout = async () => {\n        await fetch('http://localhost/logout', {\n            method: 'GET',\n            credentials: 'include'\n        })\n\n        dispatch('LOGOUT', '')\n        requestSignout(1)\n    }\n\n    if (signout) return <Redirect href=\"/\" />\n\n    if (!username && !initial) return <Redirect href=\"/signin\" />\n\n    return (\n        <section id=\"user\">\n            <h1 class=\"title\">Welcome back {username}</h1>\n            <aside class=\"action-list\">\n                <Link href=\"/my-book\">\n                    <a class=\"action\">My Book</a>\n                </Link>\n                <button class=\"action\" onClick={logout}>\n                    Logout\n                </button>\n            </aside>\n        </section>\n    )\n}\n\nexport default User\n","import { h } from 'preact'\nimport { useState } from 'preact/hooks'\n\nimport { Link, Redirect } from 'wouter/preact'\n\nimport useSWR from 'swr'\nimport graphqlRequest, { graphqlBase } from '../libs/graphql'\n\nimport BookDisplay from '../component/book'\nimport { Book } from '../component/book/types'\n\nimport '../styles/landing.styl'\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../stores/types'\n\nconst MyBook = () => {\n    let { username, initial } = useStoreon<UserStore, UserEvent>(\n        'username',\n        'initial'\n    )\n\n    let { data: books, error } = useSWR(\n        [\n            'listBorrowed',\n            `{\n              listBorrowed {\n                data {\n                  id,\n                  title,\n                  author,\n                  price\n                }\n              }\n            }`\n        ],\n        graphqlRequest\n    )\n\n    let [returned, updateReturned] = useState<String[]>([])\n\n    let returnBook = async (id: string) => {\n        let { success } = await graphqlBase(\n            'returnBooks',\n            `mutation {\n              returnBooks(books: [\"${id}\"]) {\n                success\n              }\n            }`\n        )\n\n        if (!success) return console.log('Something went wrong')\n\n        updateReturned([...returned, id])\n    }\n\n    if (error)\n        return (\n            <section id=\"book-list\" class=\"-error\">\n                <h3 class=\"title\">Failed to fetch</h3>\n                <p class=\"detail\">\n                    There is a problem requesting an list of books.\n                </p>\n                <button class=\"action\" onClick={() => window.location.reload()}>\n                    Retry\n                </button>\n            </section>\n        )\n\n    if (!books || initial)\n        return (\n            <section id=\"book-list\">\n                <h1 class=\"header\">My Book</h1>\n                {Array(8)\n                    .fill(null)\n                    .map((_, index) => (\n                        <BookDisplay key={index} preload hiddenPrice />\n                    ))}\n            </section>\n        )\n\n    if (!username) return <Redirect href=\"/signin\" />\n\n    if (!books.length || books.length === returned.length)\n        return (\n            <section id=\"book-list\" class=\"-error\">\n                <h3 class=\"title\">No Borrow</h3>\n                <p class=\"detail\">No book have been borrowed.</p>\n                <Link href=\"/\">\n                    <button class=\"action -compact\">Borrow some book</button>\n                </Link>\n            </section>\n        )\n\n    return (\n        <section id=\"book-list\">\n            <h1 class=\"header\">My Book</h1>\n            {books\n                .filter((book: Book) => !returned.includes(book.id))\n                .map((book: Book) => (\n                    <BookDisplay\n                        key={book.id}\n                        {...{ book }}\n                        hiddenPrice\n                        onClick={returnBook}\n                        action=\"Return\"\n                    />\n                ))}\n        </section>\n    )\n}\n\nexport default MyBook\n","import { h } from 'preact'\n\nimport useLocation from 'wouter/use-location'\n\nimport Landing from './routes/landing'\nimport Signin from './routes/signin'\nimport Signup from './routes/signup'\nimport NotFound from './routes/not-found'\nimport User from './routes/user'\nimport MyBook from './routes/my-book'\n\nconst Pages = () => {\n    const [location] = useLocation()\n\n    switch (location) {\n        case '/':\n            return <Landing />\n\n        case '/signin':\n            return <Signin />\n\n        case '/signup':\n            return <Signup />\n\n        case '/me':\n            return <User />\n\n        case '/my-book':\n            return <MyBook />\n\n        default:\n            return <NotFound />\n    }\n}\n\nexport default Pages\n","  \nimport { h } from 'preact'\nimport { useEffect } from 'preact/hooks'\n\nimport store from './stores'\nimport { StoreContext } from 'storeon/preact'\n\nimport AppLayout from './layouts/app'\nimport RefreshProvider from './layouts/refresh-provider'\n\nimport Router from './router'\n\nimport './styles/init.styl'\n\nconst App = () => {\n    useEffect(() => {\n        document.addEventListener('touchstart', () => null, { passive: true })\n    }, [])\n\n    return (\n        <main>\n            <StoreContext.Provider value={store}>\n                <RefreshProvider>\n                    <AppLayout>\n                        <Router />\n                    </AppLayout>\n                </RefreshProvider>\n            </StoreContext.Provider>\n        </main>\n    )\n}\n\nexport default App","module.exports = require(\"preact\");","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n"],"sourceRoot":""}