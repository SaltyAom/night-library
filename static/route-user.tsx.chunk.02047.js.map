{"version":3,"sources":["webpack:///./routes/user.tsx"],"names":["User","dispatch","useStoreon","useReducer","signout","requestSignout","username","initial","href","id","class","onClick","fetch","method","credentials"],"mappings":"2FAAA,qEAsDeA,UA5CF,WAAM,IACTC,EAAaC,cAAbD,SADS,EAGiBE,aAAW,WAAC,OAAI,KAAM,GAAjDC,EAHU,KAGDC,EAHC,OAKaH,YAAiC,WAAY,WAAnEI,EALS,EAKTA,SAAUC,EALD,EAKCA,QAYhB,OAAGH,EAEK,YAAC,IAAD,CAAUI,KAAK,MAGnBF,GAAaC,EAMb,uBAASE,GAAG,QACR,kBAAIC,MAAM,SAAV,gBAAgCJ,GAChC,qBAAOI,MAAM,eACT,YAAC,IAAD,CAAMF,KAAK,YACP,iBAAGE,MAAM,UAAT,YAIJ,sBAAQA,MAAM,SAASC,QA7BtB,6CACT,uBAAMC,MAAM,0BAA2B,CACnCC,OAAQ,MACRC,YAAa,aAFjB,MAGE,sBAEFb,EAAS,SAAU,IACnBI,EAAe,GAHb,oCAyBM,YAZJ,YAAC,IAAD,CAAUG,KAAK,c","file":"route-user.tsx.chunk.02047.js","sourcesContent":["import { h } from 'preact'\nimport { useReducer } from 'preact/hooks'\n\nimport { Link, Redirect } from 'wouter/preact'\n\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../stores/types'\n\nimport '../styles/user.styl'\n\nconst User = () => {\n    let { dispatch } = useStoreon<UserStore, UserEvent>()\n\n    let [signout, requestSignout] = useReducer(_ => true, false)\n\n    let { username, initial } = useStoreon<UserStore, UserEvent>('username', 'initial')\n\n    let logout = async () => {\n        await fetch(\"http://localhost/logout\", {\n            method: \"GET\",\n            credentials: \"include\"\n        })\n\n        dispatch(\"LOGOUT\", '')\n        requestSignout(1)\n    }\n\n    if(signout)\n        return (\n            <Redirect href=\"/\" />\n        )\n\n    if(!username && !initial)\n        return (\n            <Redirect href=\"/signin\" />\n        )\n\n    return (\n        <section id=\"user\">\n            <h1 class=\"title\">Welcome back {username}</h1>\n            <aside class=\"action-list\">\n                <Link href=\"/my-book\">\n                    <a class=\"action\">\n                        My Book\n                    </a>\n                </Link>\n                <button class=\"action\" onClick={logout}>\n                    Logout\n                </button>\n            </aside>\n        </section>\n    )\n}\n\nexport default User"],"sourceRoot":""}