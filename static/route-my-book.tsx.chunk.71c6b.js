(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"kLe+":function(e,t,o){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}o.r(t);var r=o("hosL"),c=o("QRet"),i=o("QTFd"),s=o("mdnY"),a=o("LT/T"),l=o("GNgh"),b=(o("tyAA"),o("MRB6"));t.default=function(){var e=Object(b.b)("username","initial"),t=e.username,o=e.initial,h=Object(s.a)(["listBorrowed","{\n              listBorrowed {\n                data {\n                  id,\n                  title,\n                  author,\n                  price\n                }\n              }\n            }"],a.a),u=h.data,d=h.error,j=Object(c.j)([]),O=j[0],f=j[1],k=function(e){return new Promise((function(t,o){return Promise.resolve(Object(a.b)("returnBooks",'mutation {\n              returnBooks(books: ["'+e+'"]) {\n                success\n              }\n            }')).then((function(n){try{return n.success?(f([].concat(O,[e])),t()):t(console.log("Something went wrong"))}catch(e){return o(e)}}),o)}))};return d?Object(r.h)("section",{id:"book-list",class:"-error"},Object(r.h)("h3",{class:"title"},"Failed to fetch"),Object(r.h)("p",{class:"detail"},"There is a problem requesting an list of books."),Object(r.h)("button",{class:"action",onClick:function(){return window.location.reload()}},"Retry")):!u||o?Object(r.h)("section",{id:"book-list"},Object(r.h)("h1",{class:"header"},"My Book"),Array(8).fill(null).map((function(e,t){return Object(r.h)(l.a,{key:t,preload:!0,hiddenPrice:!0})}))):t?u.length?Object(r.h)("section",{id:"book-list"},Object(r.h)("h1",{class:"header"},"My Book"),u.filter((function(e){return!O.includes(e.id)})).map((function(e){return Object(r.h)(l.a,n({key:e.id},{book:e},{hiddenPrice:!0,onClick:k,action:"Return"}))}))):Object(r.h)("section",{id:"book-list",class:"-error"},Object(r.h)("h3",{class:"title"},"No Borrow"),Object(r.h)("p",{class:"detail"},"No book have been borrowed."),Object(r.h)(i.a,{href:"/"},Object(r.h)("button",{class:"action -compact"},"Borrow some book"))):Object(r.h)(i.b,{href:"/signin"})}}}]);
//# sourceMappingURL=route-my-book.tsx.chunk.71c6b.js.map