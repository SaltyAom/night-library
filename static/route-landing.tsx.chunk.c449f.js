(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+DSB":function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.r(e);var o=n("hosL"),i=n("QRet"),a=n("MRB6"),c=n("mdnY"),s=n("LT/T"),l=n("GNgh"),b=(n("tyAA"),n("QTFd"));e.default=function(){var t=Object(a.b)("username").username,e=Object(i.j)([]),n=e[0],u=e[1];if(!t)return Object(o.h)("section",{id:"book-list",class:"-error"},Object(o.h)("h3",{class:"title"},"Night Library"),Object(o.h)("p",{class:"detail"},"Online library management system written in Actix Web."),Object(o.h)(b.a,{href:"/signin"},Object(o.h)("a",{class:"action"},"Signin")));var h=Object(c.a)(["listBook","{\n              listBook {\n                data {\n                  id,\n                  title,\n                  author,\n                  price\n                }\n              }\n            }"],s.a),d=h.data,O=h.error,j=Object(c.a)(["listBorrowed","{\n              listBorrowed {\n                data {\n                  id\n                }\n              }\n            }"],s.a),f=j.data;if(O||j.error)return Object(o.h)("section",{id:"book-list",class:"-error"},Object(o.h)("h3",{class:"title"},"Failed to fetch"),Object(o.h)("p",{class:"detail"},"There is a problem requesting an list of books."),Object(o.h)("button",{class:"action",onClick:function(){return window.location.reload()}},"Retry"));if(!d||!f)return Object(o.h)("section",{id:"book-list"},Object(o.h)("h1",{class:"header"},"Book List"),Array(8).fill(null).map((function(t,e){return Object(o.h)(l.a,{key:e,preload:!0})})));var k=f.map((function(t){return t.id})),p=function(t){return new Promise((function(e,n){var r,o;return Promise.resolve(Object(s.b)("borrowBooks",'mutation {\n              borrowBooks(books: ["'+t+'"]) {\n                data\n                success\n              }\n            }')).then((function(t){try{return o=(r=t).data,r.success?(u(o),e()):e(console.log("Something went wrong"))}catch(t){return n(t)}}),n)}))};return Object(o.h)("section",{id:"book-list"},Object(o.h)("h1",{class:"header"},"Book List"),d.map((function(t){var e=!(!k.length&&!n.length)&&(k.includes(t.id)||n.includes(t.id));return Object(o.h)(l.a,r({key:t.id},{book:t},{style:e?{opacity:.5}:{},action:e?"Borrowed":"Borrow",onClick:p,disabled:e}))})))}}}]);
//# sourceMappingURL=route-landing.tsx.chunk.c449f.js.map