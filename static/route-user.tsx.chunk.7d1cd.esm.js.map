{"version":3,"sources":["webpack:///./routes/user.tsx"],"names":["User","dispatch","useStoreon","signout","requestSignout","useReducer","_","username","initial","href","id","class","onClick","async","fetch","method","credentials"],"mappings":"2FAAA,qEAsDeA,UA5CF,KACT,IAAI,SAAEC,GAAaC,eAEdC,EAASC,GAAkBC,YAAWC,KAAK,GAAM,IAElD,SAAEC,EAAF,QAAYC,GAAYN,YAAiC,WAAY,WAYzE,OAAGC,EAEK,YAAC,IAAD,CAAUM,KAAK,MAGnBF,GAAaC,EAMb,uBAASE,GAAG,QACR,kBAAIC,MAAM,SAAV,gBAAgCJ,GAChC,qBAAOI,MAAM,eACT,YAAC,IAAD,CAAMF,KAAK,YACP,iBAAGE,MAAM,UAAT,YAIJ,sBAAQA,MAAM,SAASC,QA7BtBC,gBACHC,MAAM,0BAA2B,CACnCC,OAAQ,MACRC,YAAa,YAGjBf,EAAS,SAAU,IACnBG,EAAe,KAsBP,YAZJ,YAAC,IAAD,CAAUK,KAAK,c","file":"route-user.tsx.chunk.7d1cd.esm.js","sourcesContent":["import { h } from 'preact'\nimport { useReducer } from 'preact/hooks'\n\nimport { Link, Redirect } from 'wouter/preact'\n\nimport { useStoreon } from 'storeon/preact'\nimport { UserStore, UserEvent } from '../stores/types'\n\nimport '../styles/user.styl'\n\nconst User = () => {\n    let { dispatch } = useStoreon<UserStore, UserEvent>()\n\n    let [signout, requestSignout] = useReducer(_ => true, false)\n\n    let { username, initial } = useStoreon<UserStore, UserEvent>('username', 'initial')\n\n    let logout = async () => {\n        await fetch(\"http://localhost/logout\", {\n            method: \"GET\",\n            credentials: \"include\"\n        })\n\n        dispatch(\"LOGOUT\", '')\n        requestSignout(1)\n    }\n\n    if(signout)\n        return (\n            <Redirect href=\"/\" />\n        )\n\n    if(!username && !initial)\n        return (\n            <Redirect href=\"/signin\" />\n        )\n\n    return (\n        <section id=\"user\">\n            <h1 class=\"title\">Welcome back {username}</h1>\n            <aside class=\"action-list\">\n                <Link href=\"/my-book\">\n                    <a class=\"action\">\n                        My Book\n                    </a>\n                </Link>\n                <button class=\"action\" onClick={logout}>\n                    Logout\n                </button>\n            </aside>\n        </section>\n    )\n}\n\nexport default User"],"sourceRoot":""}